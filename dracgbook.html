 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dracula's Rise - The Voyage of the Demeter</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* EXACT SAME CSS AS FIRST GAME */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: #000;
            color: #fff;
            font-family: 'Press Start 2P', cursive;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .game-container {
            border: 4px double #fff;
            padding: 20px;
            margin-bottom: 20px;
            background-color: #111;
            min-height: 80vh;
        }
        
        .screen {
            display: none;
        }
        
        .active {
            display: block;
        }
        
        h1, h2, h3 {
            color: #ff3333;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 5px #ff0000;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 30px;
        }
        
        h2 {
            font-size: 1.8rem;
            margin-top: 20px;
        }
        
        h3 {
            font-size: 1.2rem;
            text-align: left;
            border-bottom: 1px solid #333;
            padding-bottom: 5px;
            margin-top: 15px;
        }
        
        .game-text {
            background-color: #000;
            border: 2px solid #333;
            padding: 15px;
            margin: 20px 0;
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
            font-size: 0.9rem;
            line-height: 1.8;
        }
        
        .game-text p {
            margin-bottom: 15px;
        }
        
        .npc-dialogue {
            color: #ffff66;
            font-style: italic;
            margin: 10px 0;
            padding-left: 10px;
            border-left: 2px solid #ffff66;
        }
        
        .player-dialogue {
            color: #66ff66;
            margin: 10px 0;
            padding-left: 10px;
            border-left: 2px solid #66ff66;
        }
        
        .button-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        
        button {
            background-color: #222;
            color: #fff;
            border: 2px solid #666;
            font-family: 'Press Start 2P', cursive;
            padding: 12px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
            flex-grow: 1;
            min-width: 200px;
        }
        
        button:hover:not(:disabled) {
            background-color: #333;
            border-color: #ff3333;
            color: #ff3333;
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-item {
            background-color: #222;
            padding: 10px;
            border: 1px solid #444;
        }
        
        .stat-value {
            color: #ffff66;
            font-weight: bold;
        }
        
        .inventory {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 10px 0;
        }
        
        .item {
            background-color: #1a1a1a;
            padding: 8px;
            border: 1px solid #333;
            font-size: 0.8rem;
        }
        
        .item-rare {
            border-color: #ff9900;
            color: #ff9900;
        }
        
        .item-legendary {
            border-color: #ff3366;
            color: #ff3366;
        }
        
        .outcome-good {
            color: #66ff66;
        }
        
        .outcome-bad {
            color: #ff6666;
        }
        
        .warning {
            color: #ff9900;
        }
        
        .game-over {
            color: #ff0000;
            font-size: 1.5rem;
            text-align: center;
            margin: 30px 0;
        }
        
        .victory {
            color: #66ff66;
            font-size: 1.5rem;
            text-align: center;
            margin: 30px 0;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            color: #666;
            font-size: 0.7rem;
            border-top: 1px solid #333;
            padding-top: 15px;
        }
        
        /* Gamebook features */
        .dice-roll {
            background-color: #2a2a2a;
            border: 2px solid #555;
            padding: 10px;
            margin: 10px 0;
            text-align: center;
        }
        
        .dice-result {
            font-size: 1.5rem;
            color: #ffff66;
            margin: 10px 0;
        }
        
        .combat-log {
            background-color: #330000;
            border: 1px solid #660000;
            padding: 10px;
            margin: 10px 0;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .combat-turn {
            margin: 5px 0;
            padding: 5px;
            border-bottom: 1px dotted #660000;
        }
        
        .skill-check {
            background-color: #1a1a2a;
            border: 1px solid #4444ff;
            padding: 10px;
            margin: 10px 0;
        }
        
        .puzzle {
            background-color: #2a1a2a;
            border: 2px dashed #aa66aa;
            padding: 15px;
            margin: 15px 0;
        }
        
        .trap {
            background-color: #552222;
            border: 2px solid #ff5555;
            padding: 15px;
            margin: 15px 0;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { border-color: #ff5555; }
            50% { border-color: #ff0000; }
            100% { border-color: #ff5555; }
        }
        
        .inventory-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            margin: 5px 0;
            background-color: #222;
            border: 1px solid #444;
        }
        
        .item-use-btn {
            padding: 5px 10px;
            font-size: 0.7rem;
            background-color: #333;
            border: 1px solid #666;
            cursor: pointer;
        }
        
        .health-bar {
            width: 100%;
            height: 20px;
            background-color: #330000;
            border: 1px solid #666;
            margin: 5px 0;
            position: relative;
        }
        
        .health-fill {
            height: 100%;
            background-color: #ff0000;
            transition: width 0.3s;
        }
        
        .health-text {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            text-align: center;
            line-height: 20px;
            font-size: 0.7rem;
        }
        
        .luck-bar {
            width: 100%;
            height: 15px;
            background-color: #222244;
            border: 1px solid #4444aa;
            margin: 5px 0;
            position: relative;
        }
        
        .luck-fill {
            height: 100%;
            background-color: #4444ff;
            transition: width 0.3s;
        }
        
        .luck-text {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            text-align: center;
            line-height: 15px;
            font-size: 0.6rem;
        }
        
        .section-number {
            color: #ff9900;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .gamebook-text {
            font-size: 1rem;
            line-height: 1.8;
        }
        
        .gamebook-text p {
            margin-bottom: 20px;
        }
        
        .turn-to {
            color: #ff9900;
            font-weight: bold;
            cursor: pointer;
            text-decoration: underline;
        }
        
        .turn-to:hover {
            color: #ffcc00;
        }
        
        .combat-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }
        
        .combat-stat {
            background-color: #2a2a2a;
            padding: 10px;
            text-align: center;
        }
        
        .enemy-sprite {
            text-align: center;
            margin: 15px 0;
            font-size: 3rem;
        }
        
        .continue-btn {
            background-color: #333;
            color: #66ff66;
            border: 2px solid #66ff66;
            font-size: 1rem;
            padding: 15px;
            margin: 20px auto;
            display: block;
            width: 80%;
        }
        
        .continue-btn:hover {
            background-color: #66ff66;
            color: #000;
        }
        
        /* New additions for Dracula's Rise */
        .crew-member {
            color: #66aaff;
            font-weight: bold;
        }
        
        .ship-area {
            color: #ffcc66;
            font-weight: bold;
        }
        
        .blood-hunger {
            color: #ff4444;
            animation: pulse 2s infinite;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }
            
            h2 {
                font-size: 1.3rem;
            }
            
            .game-text {
                font-size: 0.8rem;
            }
            
            button {
                font-size: 0.7rem;
                min-width: 150px;
            }
            
            .combat-stats {
                grid-template-columns: 1fr;
            }
            
            .continue-btn {
                width: 95%;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- Start Screen -->
        <div id="start-screen" class="screen active">
            <h1>DRACULA'S RISE</h1>
            <h2>The Voyage of the Demeter</h2>
            <div class="game-text">
                <p>August, 1897. The Russian schooner Demeter sails from Varna to Whitby, carrying 50 boxes of earth from your Transylvanian castle.</p>
                <p>You awaken in your coffin, deep in the ship's hold. The voyage has been long, and the hunger is upon you. You must feed to survive the journey to England.</p>
                <p>The crew of the Demeter suspects something is wrong. The captain's log speaks of a strange sickness, missing men, and a creeping dread that haunts the ship.</p>
                <p>As Dracula, you must navigate the ship, feed on the crew, and avoid detection until landfall. But beware - the crew is armed, superstitious, and growing desperate.</p>
                <p class="warning">Survive the voyage. Feed when you must. Reach England with your strength intact.</p>
                <p class="outcome-good">NEW MECHANICS: Blood Hunger, Crew Suspicion, Ship Navigation, and Sea Survival!</p>
            </div>
            <div class="button-container">
                <button id="start-btn">BEGIN THE VOYAGE</button>
                <button id="rules-btn">GAME RULES</button>
            </div>
        </div>
        
        <!-- Rules Screen -->
        <div id="rules-screen" class="screen">
            <h2>VOYAGE RULES</h2>
            <div class="game-text">
                <h3>THE DEMETER</h3>
                <p>You are aboard the Russian schooner Demeter, bound for England. The ship has limited areas to explore: Hold, Galley, Crew Quarters, Deck, Captain's Cabin, and more.</p>
                
                <h3>BLOOD HUNGER</h3>
                <p>As a vampire, you must feed to maintain your <span class="blood-hunger">BLOOD HUNGER</span> meter. If it reaches maximum, you lose control and attack recklessly.</p>
                <p>If it reaches zero, you weaken and may perish before reaching England.</p>
                
                <h3>CREW SUSPICION</h3>
                <p>The crew grows more suspicious with each attack. High suspicion makes the crew aggressive, armed, and likely to hunt you.</p>
                <p>Keep suspicion low by being subtle, disposing of bodies, and creating diversions.</p>
                
                <h3>SHIP NAVIGATION</h3>
                <p>You can move between ship areas each night. Some areas are safer than others. Some have valuable resources or vulnerable crew members.</p>
                
                <h3>COMBAT AT SEA</h3>
                <p>Combat on a ship is dangerous. The confined spaces, armed crew, and risk of falling overboard make every fight perilous.</p>
                
                <h3>VICTORY CONDITIONS</h3>
                <p>To win, you must survive until the Demeter reaches England. You can achieve different endings based on how many crew survive and your remaining strength.</p>
            </div>
            <div class="button-container">
                <button onclick="showStartScreen()">RETURN TO START</button>
                <button onclick="showCharacterScreen()">PREPARE FOR VOYAGE</button>
            </div>
        </div>
        
        <!-- Character Creation Screen -->
        <div id="character-screen" class="screen">
            <h2>PREPARE YOUR DRACULA</h2>
            <div class="game-text">
                <p>The voyage will test your vampiric abilities. You have been weakened by the long journey in the coffin.</p>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <h3>STAMINA <span id="stamina-value" class="stat-value">?</span></h3>
                        <p>Your health and endurance</p>
                        <button onclick="rollStamina()">ROLL STAMINA</button>
                    </div>
                    <div class="stat-item">
                        <h3>SKILL <span id="skill-value" class="stat-value">?</span></h3>
                        <p>Your combat ability</p>
                        <button onclick="rollSkill()">ROLL SKILL</button>
                    </div>
                    <div class="stat-item">
                        <h3>LUCK <span id="luck-value" class="stat-value">?</span></h3>
                        <p>Your fortune</p>
                        <button onclick="rollLuck()">ROLL LUCK</button>
                    </div>
                </div>
                
                <h3>VAMPIRIC ABILITIES</h3>
                <p>Distribute 10 points among your vampiric powers:</p>
                
                <div class="stats-container">
                    <div class="stat-item">
                        <h3>STEALTH <span id="stealth-value" class="stat-value">3</span></h3>
                        <p>Move unseen on the ship</p>
                        <button onclick="changeStat('stealth', 1)" id="stealth-plus">+</button>
                        <button onclick="changeStat('stealth', -1)" id="stealth-minus">-</button>
                    </div>
                    <div class="stat-item">
                        <h3>DOMINATION <span id="domination-value" class="stat-value">3</span></h3>
                        <p>Control minds of crew</p>
                        <button onclick="changeStat('domination', 1)" id="domination-plus">+</button>
                        <button onclick="changeStat('domination', -1)" id="domination-minus">-</button>
                    </div>
                    <div class="stat-item">
                        <h3>SHAPESHIFT <span id="shapeshift-value" class="stat-value">3</span></h3>
                        <p>Become mist, bat, or wolf</p>
                        <button onclick="changeStat('shapeshift', 1)" id="shapeshift-plus">+</button>
                        <button onclick="changeStat('shapeshift', -1)" id="shapeshift-minus">-</button>
                    </div>
                </div>
                
                <p id="points-remaining">Points remaining: <span id="points">10</span></p>
                
                <h3>CHOOSE STARTING ADVANTAGE</h3>
                <p>Your preparations before the voyage give you one advantage:</p>
            </div>
            
            <div class="button-container">
                <button id="crew-knowledge-btn" onclick="selectStartingItem('crew_knowledge')">CREW KNOWLEDGE (Know crew schedules)</button>
                <button id="hidden-cache-btn" onclick="selectStartingItem('hidden_cache')">HIDDEN CACHE (Extra coffin earth)</button>
                <button id="rats-btn" onclick="selectStartingItem('rat_swarm')">RAT SWARM (Can summon rats)</button>
            </div>
            
            <div class="button-container">
                <button id="begin-btn" disabled>BEGIN VOYAGE</button>
                <button onclick="showStartScreen()">BACK</button>
            </div>
        </div>
        
        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <h2>THE VOYAGE OF THE DEMETER</h2>
            
            <div class="stats-container">
                <div class="stat-item">
                    <h3>STAMINA</h3>
                    <div class="health-bar">
                        <div id="stamina-fill" class="health-fill" style="width: 100%"></div>
                        <div class="health-text"><span id="current-stamina">?</span>/<span id="max-stamina">?</span></div>
                    </div>
                </div>
                <div class="stat-item">
                    <h3>BLOOD HUNGER</h3>
                    <div class="health-bar">
                        <div id="hunger-fill" class="health-fill" style="width: 50%; background-color: #880000"></div>
                        <div class="health-text"><span id="current-hunger">?</span>/10</div>
                    </div>
                </div>
                <div class="stat-item">
                    <h3>CREW SUSPICION</h3>
                    <div class="health-bar">
                        <div id="suspicion-fill" class="health-fill" style="width: 20%; background-color: #4444ff"></div>
                        <div class="health-text"><span id="current-suspicion">?</span>/10</div>
                    </div>
                </div>
                <div class="stat-item">
                    <h3>DAYS AT SEA</h3>
                    <p class="stat-value" id="days">1</p>
                </div>
            </div>
            
            <div class="button-container">
                <button onclick="showInventory()">INVENTORY (<span id="inventory-count">0</span>)</button>
                <button onclick="showStats()">VAMPIRIC POWERS</button>
                <button onclick="saveGame()">SAVE VOYAGE</button>
                <button onclick="loadGame()">LOAD VOYAGE</button>
            </div>
            
            <div class="game-text" id="game-text">
                <!-- Gamebook text will appear here -->
            </div>
            
            <div class="button-container" id="action-buttons">
                <!-- Action buttons will appear here -->
            </div>
        </div>
        
        <!-- Inventory Screen -->
        <div id="inventory-screen" class="screen">
            <h2>SHIP'S INVENTORY</h2>
            <div class="game-text">
                <h3>VAMPIRIC ITEMS</h3>
                <div id="vampire-items-display">
                    <!-- Vampire items will appear here -->
                </div>
                
                <h3>SHIP ITEMS</h3>
                <div id="ship-items-display">
                    <!-- Ship items will appear here -->
                </div>
                
                <h3>CREW POSSESSIONS</h3>
                <div id="crew-items-display">
                    <!-- Crew items will appear here -->
                </div>
                
                <h3>COFFIN EARTH</h3>
                <div id="earth-display">
                    <!-- Coffin earth will appear here -->
                </div>
            </div>
            <div class="button-container">
                <button onclick="returnToGame()">RETURN TO VOYAGE</button>
            </div>
        </div>
        
        <!-- Stats Screen -->
        <div id="stats-screen" class="screen">
            <h2>VAMPIRIC POWERS</h2>
            <div class="game-text">
                <div class="stats-container">
                    <div class="stat-item">
                        <h3>STEALTH</h3>
                        <p class="stat-value" id="sheet-stealth">?</p>
                    </div>
                    <div class="stat-item">
                        <h3>DOMINATION</h3>
                        <p class="stat-value" id="sheet-domination">?</p>
                    </div>
                    <div class="stat-item">
                        <h3>SHAPESHIFT</h3>
                        <p class="stat-value" id="sheet-shapeshift">?</p>
                    </div>
                    <div class="stat-item">
                        <h3>SKILL</h3>
                        <p class="stat-value" id="sheet-skill">?</p>
                    </div>
                    <div class="stat-item">
                        <h3>LUCK</h3>
                        <p class="stat-value" id="sheet-luck">?</p>
                    </div>
                </div>
                
                <h3>CREW STATUS</h3>
                <div id="crew-status">
                    <!-- Crew status will appear here -->
                </div>
                
                <h3>SHIP AREAS</h3>
                <div id="ship-areas">
                    <!-- Ship areas will appear here -->
                </div>
            </div>
            <div class="button-container">
                <button onclick="returnToGame()">RETURN TO VOYAGE</button>
            </div>
        </div>
        
        <!-- Combat Screen -->
        <div id="combat-screen" class="screen">
            <h2>SHIP COMBAT!</h2>
            <div class="game-text">
                <div id="combat-description">
                    <!-- Combat description will appear here -->
                </div>
                
                <div class="combat-stats">
                    <div class="combat-stat">
                        <h3>DRACULA</h3>
                        <p>STAMINA: <span id="player-combat-stamina">?</span></p>
                        <p>ATTACK: <span id="player-attack">?</span></p>
                        <div class="health-bar">
                            <div id="player-combat-health" class="health-fill"></div>
                            <div class="health-text"><span id="player-stamina-text">?</span></div>
                        </div>
                    </div>
                    <div class="combat-stat">
                        <h3 id="enemy-name">CREW MEMBER</h3>
                        <p>STAMINA: <span id="enemy-combat-stamina">?</span></p>
                        <p>ATTACK: <span id="enemy-attack">?</span></p>
                        <div class="health-bar">
                            <div id="enemy-combat-health" class="health-fill"></div>
                            <div class="health-text"><span id="enemy-stamina-text">?</span></div>
                        </div>
                    </div>
                </div>
                
                <div class="enemy-sprite" id="enemy-sprite">
                    âš“
                </div>
                
                <div class="combat-log" id="combat-log">
                    <!-- Combat log will appear here -->
                </div>
                
                <div id="combat-options">
                    <!-- Combat options will appear here -->
                </div>
            </div>
        </div>
        
        <!-- Dice Roll Screen -->
        <div id="dice-screen" class="screen">
            <h2>ROLL THE DICE!</h2>
            <div class="game-text">
                <div class="dice-roll">
                    <p id="dice-reason">Testing your skill...</p>
                    <div class="dice-result" id="dice-result">
                        ?
                    </div>
                    <p id="dice-outcome">Roll the dice to see what happens!</p>
                </div>
                
                <div id="dice-options">
                    <!-- Dice options will appear here -->
                </div>
            </div>
        </div>
        
        <!-- Game Over Screen -->
        <div id="gameover-screen" class="screen">
            <h2>VOYAGE ENDED</h2>
            <div class="game-text" id="gameover-text">
                <!-- Game over text will appear here -->
            </div>
            <div class="button-container">
                <button onclick="restartGame()">TRY AGAIN</button>
                <button onclick="showStartScreen()">MAIN MENU</button>
            </div>
        </div>
        
        <!-- Victory Screen -->
        <div id="victory-screen" class="screen">
            <h2>VOYAGE COMPLETE!</h2>
            <div class="game-text" id="victory-text">
                <!-- Victory text will appear here -->
            </div>
            <div class="button-container">
                <button onclick="restartGame()">SAIL AGAIN</button>
                <button onclick="showStartScreen()">MAIN MENU</button>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <p>DRACULA'S RISE - THE VOYAGE OF THE DEMETER</p>
        <p>Based on Bram Stoker's Dracula - Survive the journey to England!</p>
    </div>

    <script>
        // Game State for Dracula's Rise
        const gameState = {
            screen: 'start',
            currentSection: 1,
            visitedSections: [],
            stats: {
                stamina: 0,
                maxStamina: 0,
                skill: 0,
                luck: 0,
                initialLuck: 0,
                stealth: 3,
                domination: 3,
                shapeshift: 3,
                points: 10
            },
            hunger: 5,  // Blood hunger (0-10)
            suspicion: 2, // Crew suspicion (0-10)
            days: 1,     // Days at sea
            crewAlive: 7, // Total crew members alive
            currentArea: 'hold',
            inventory: [],
            earth: 1,    // Coffin earth remaining
            gameOver: false,
            victory: false,
            inCombat: false,
            enemy: null,
            enemyData: null,
            combatRound: 0,
            afterCombatSection: null,
            selectedStartingItem: null,
            crew: {
                captain: { name: "Captain Demeter", alive: true, suspicious: false, location: "captains_cabin" },
                first_mate: { name: "First Mate Ivan", alive: true, suspicious: false, location: "deck" },
                cook: { name: "Cook Petrov", alive: true, suspicious: false, location: "galley" },
                lookout: { name: "Lookout Yuri", alive: true, suspicious: false, location: "deck" },
                sailor1: { name: "Sailor Dimitri", alive: true, suspicious: false, location: "crew_quarters" },
                sailor2: { name: "Sailor Alexei", alive: true, suspicious: false, location: "crew_quarters" },
                sailor3: { name: "Sailor Sergei", alive: true, suspicious: false, location: "hold" }
            },
            areas: {
                hold: { name: "Ship's Hold", visited: true, description: "Dark, cramped space with your coffins and cargo." },
                galley: { name: "Galley", visited: false, description: "Ship's kitchen. Smells of stale food and cooking oil." },
                crew_quarters: { name: "Crew Quarters", visited: false, description: "Where the crew sleeps. Hammocks swing with the ship's motion." },
                deck: { name: "Main Deck", visited: false, description: "Open air, ropes, sails, and the vast sea around you." },
                captains_cabin: { name: "Captain's Cabin", visited: false, description: "The captain's private quarters. Charts and logs." },
                forecastle: { name: "Forecastle", visited: false, description: "Forward part of the ship. Anchor chains and storage." }
            }
        };
        
        // Gamebook Sections for Dracula's Rise
        const gamebook = {
            1: {
                text: "You awaken in your coffin, deep in the <span class='ship-area'>ship's hold</span>. The hunger claws at your insides. The voyage has been long, and you must feed soon. You can hear the creaking of the ship and distant footsteps above. It's night. What do you do?",
                options: [
                    { text: "Remain in the hold and listen for crew members", goto: 2 },
                    { text: "Transform into mist and explore the ship", skill: "shapeshift", difficulty: 8, success: 3, failure: 4 },
                    { text: "Wait until a crew member comes to the hold", goto: 5 }
                ]
            },
            2: {
                text: "You listen carefully. Footsteps approach - it's <span class='crew-member'>Sailor Sergei</span>, checking the cargo. He's alone, carrying a lantern. The hunger pulses within you. Will you:",
                options: [
                    { text: "Attack him quickly before he can scream", goto: 6 },
                    { text: "Use domination to lure him closer", skill: "domination", difficulty: 7, success: 7, failure: 8 },
                    { text: "Remain hidden and let him pass", goto: 9 }
                ]
            },
            3: {
                text: "You transform into mist and seep through the cracks in the hold. You drift upward to the <span class='ship-area'>main deck</span>. The night air is cool and salty. Two crew members are on watch: <span class='crew-member'>First Mate Ivan</span> at the wheel and <span class='crew-member'>Lookout Yuri</span> in the crow's nest. Where will you go?",
                options: [
                    { text: "Drift toward the captain's cabin", goto: 10 },
                    { text: "Go to the galley where the cook might be alone", goto: 11 },
                    { text: "Return to the hold and wait for better opportunity", goto: 1 }
                ]
            },
            4: {
                text: "Your shapeshifting fails! You emerge from your coffin as a bat but crash into cargo, making noise. <span class='crew-member'>Sailor Sergei</span> hears the noise and approaches with his lantern raised. 'Who's there?' he calls out. You must act quickly!",
                options: [
                    { text: "Attack him before he raises alarm", goto: 6 },
                    { text: "Try domination again", skill: "domination", difficulty: 9, success: 7, failure: 12 },
                    { text: "Hide among the cargo", skill: "stealth", difficulty: 10, success: 13, failure: 12 }
                ]
            },
            5: {
                text: "You wait patiently. Hours pass. Finally, <span class='crew-member'>Sailor Dimitri</span> comes down to fetch extra rope. He's whistling a tune, unaware of your presence. The hunger is becoming painful. Will you:",
                options: [
                    { text: "Spring from your coffin and attack", goto: 14 },
                    { text: "Whisper to him, trying to dominate his mind", skill: "domination", difficulty: 6, success: 15, failure: 16 },
                    { text: "Continue waiting - he's too alert", goto: 17 }
                ]
            },
            6: {
                text: "You burst from the shadows and grab <span class='crew-member'>Sailor Sergei</span>. He tries to scream, but you cover his mouth. The struggle is brief but noisy. You feed, restoring your strength but increasing suspicion.",
                effect: { hunger: -3, suspicion: 2 },
                crewEffect: { sailor3: false },
                goto: 18
            },
            7: {
                text: "Your mental powers take hold. <span class='crew-member'>Sailor Sergei</span>'s eyes glaze over. 'Come closer,' you whisper. He obeys, moving toward your coffin. You feed quietly, leaving him alive but weakened. Suspicion increases slightly.",
                effect: { hunger: -2, suspicion: 1 },
                goto: 19
            },
            8: {
                text: "Your domination fails! <span class='crew-member'>Sailor Sergei</span> sees your eyes glow in the darkness. 'Demon!' he screams, stumbling backward. He draws a knife!",
                enemy: "armed_sailor",
                afterCombat: 20,
                goto: "combat"
            },
            9: {
                text: "You let <span class='crew-member'>Sailor Sergei</span> pass. The hunger grows stronger. As he leaves, you hear him mutter, 'This cargo shift gives me the creeps.' The <span class='ship-area'>hold</span> is quiet again. Another night passes.",
                effect: { hunger: 1, days: 1 },
                goto: 21
            },
            10: {
                text: "You drift to the <span class='ship-area'>captain's cabin</span>. Through the window, you see <span class='crew-member'>Captain Demeter</span> writing in his log. He looks troubled. The door is locked. You could enter as mist, but he's likely armed and alert.",
                options: [
                    { text: "Enter the cabin and attempt to feed", goto: 22 },
                    { text: "Read the log through the window", skill: "stealth", difficulty: 9, success: 23, failure: 24 },
                    { text: "Return to the hold", goto: 1 }
                ]
            },
            11: {
                text: "The <span class='ship-area'>galley</span> is warm from the stove. <span class='crew-member'>Cook Petrov</span> is cleaning pots, his back to you. He's alone. The smell of blood (he cut his finger earlier) is intoxicating. Will you:",
                options: [
                    { text: "Attack the cook", goto: 25 },
                    { text: "Poison the crew's food with your vampiric essence", goto: 26 },
                    { text: "Steal food supplies to create a diversion", goto: 27 }
                ]
            },
            12: {
                text: "<span class='crew-member'>Sailor Sergei</span> raises the alarm! 'There's something in the hold!' You hear running feet above. The crew will be searching soon. You must act!",
                effect: { suspicion: 3 },
                options: [
                    { text: "Fight your way out", enemy: "alerted_crew", afterCombat: 28, goto: "combat" },
                    { text: "Hide in a different coffin", skill: "stealth", difficulty: 11, success: 29, failure: 30 },
                    { text: "Transform to mist and escape", skill: "shapeshift", difficulty: 7, success: 31, failure: 30 }
                ]
            },
            13: {
                text: "You melt into the shadows as <span class='crew-member'>Sailor Sergei</span> investigates. He finds nothing and leaves, shaking his head. 'Rats,' he mutters. You've avoided detection, but the hunger grows.",
                effect: { hunger: 1 },
                goto: 32
            },
            14: {
                text: "You attack <span class='crew-member'>Sailor Dimitri</span>! The fight is violent but quick. You feed hungrily, but the noise might have been heard. The body is at your feet.",
                effect: { hunger: -4, suspicion: 3 },
                crewEffect: { sailor1: false },
                goto: 33
            },
            15: {
                text: "<span class='crew-member'>Sailor Dimitri</span> approaches your coffin, entranced. You feed gently, taking just enough to sate your hunger without killing him. He'll wake confused but alive.",
                effect: { hunger: -2 },
                goto: 34
            },
            16: {
                text: "Your whisper startles <span class='crew-member'>Sailor Dimitri</span>. 'Who's there?' he calls, drawing his knife. He's ready for a fight!",
                enemy: "alert_sailor",
                afterCombat: 35,
                goto: "combat"
            },
            17: {
                text: "You let <span class='crew-member'>Sailor Dimitri</span> leave. The hunger is becoming unbearable. Another day passes in agony. You must feed soon or risk losing control.",
                effect: { hunger: 2, days: 1 },
                options: [
                    { text: "Leave the hold to hunt", goto: 36 },
                    { text: "Wait one more night", goto: 37 }
                ]
            },
            18: {
                text: "You've fed, but now there's a body in the hold. The crew will find it eventually. What do you do with <span class='crew-member'>Sailor Sergei</span>'s body?",
                options: [
                    { text: "Hide it among the cargo", skill: "stealth", difficulty: 8, success: 38, failure: 39 },
                    { text: "Throw it overboard (requires going to deck)", goto: 40 },
                    { text: "Leave it - let them find it", goto: 41 }
                ]
            },
            19: {
                text: "<span class='crew-member'>Sailor Sergei</span> stumbles away, pale and confused but alive. He'll report feeling weak, increasing suspicion but not confirming a monster. You've bought some time. The night continues.",
                effect: { days: 1 },
                goto: 42
            },
            20: {
                text: "After the fight, you're wounded but alive. The noise may have attracted attention. You should leave the <span class='ship-area'>hold</span>.",
                options: [
                    { text: "Go to the galley", goto: 43 },
                    { text: "Go to the crew quarters", goto: 44 },
                    { text: "Return to your coffin to heal", goto: 45 }
                ]
            },
            21: {
                text: "A full day passes in your coffin. The hunger grows to painful levels. When night falls again, you must feed. The crew is going about their duties above. It's time to hunt.",
                effect: { hunger: 2, days: 1 },
                goto: 36
            },
            22: {
                text: "You materialize behind <span class='crew-member'>Captain Demeter</span>. He senses you and turns, a silver cross in his hand! 'Stay back, demon!' he shouts. You must Test Your Luck to avoid the cross's power.",
                testLuck: true,
                lucky: { text: "You dodge the cross and overwhelm the captain.", goto: 46 },
                unlucky: { text: "The cross burns you! You retreat, wounded.", effect: { stamina: -3 }, goto: 47 }
            },
            23: {
                text: "You read the captain's log through the window: 'August 12. Another man missing. Crew grows restless. Some speak of a curse. I fear we carry more than cargo from Varna.' The captain knows something is wrong. This could be useful.",
                addItem: "captains_log",
                goto: 48
            },
            24: {
                text: "As you try to read the log, you bump against the window. <span class='crew-member'>Captain Demeter</span> looks up! 'What was that?' He goes to investigate!",
                effect: { suspicion: 1 },
                goto: 49
            },
            25: {
                text: "You attack <span class='crew-member'>Cook Petrov</span> in the galley. He fights back with a meat cleaver!",
                enemy: "cook",
                afterCombat: 50,
                goto: "combat"
            },
            26: {
                text: "You add your essence to the stew pot. The crew will eat it tomorrow and grow weak, making them easier prey. However, this will increase suspicion as they all get sick.",
                effect: { suspicion: 2 },
                addItem: "poisoned_food",
                goto: 51
            },
            27: {
                text: "You steal food supplies and hide them. Tomorrow, the crew will blame each other for the theft, creating discord. This lowers suspicion as they turn on each other.",
                effect: { suspicion: -1 },
                goto: 52
            },
            28: {
                text: "You fight off the crew but are badly wounded. The remaining crew retreats, terrified. They now know what you are. The ship is in panic.",
                effect: { suspicion: 10 },
                goto: 53
            },
            29: {
                text: "You hide in a different coffin just as crew members burst into the hold. They find Sergei's body but not you. 'Over here! He's dead!' they shout. The search intensifies, but you're safe for now.",
                goto: 54
            },
            30: {
                text: "You're discovered! Three crew members armed with knives and a lantern find you. 'There it is!' they shout. Prepare for battle!",
                enemy: "crew_search_party",
                afterCombat: 55,
                goto: "combat"
            },
            31: {
                text: "You transform to mist and slip away as the crew searches the hold. You drift to the <span class='ship-area'>forecastle</span>, a storage area at the front of the ship. It's empty for now.",
                goto: 56
            },
            32: {
                text: "Another night passes. The hunger grows. You hear the crew above talking about 'strange sounds' and 'bad luck.' Suspicion is rising. You must feed tonight.",
                effect: { hunger: 1, suspicion: 1, days: 1 },
                goto: 57
            },
            33: {
                text: "You have a body in the hold and blood on your hands. The crew will notice Dimitri is missing at morning roll call. What do you do?",
                options: [
                    { text: "Dispose of the body overboard", goto: 58 },
                    { text: "Hide the body in a crate", skill: "stealth", difficulty: 7, success: 59, failure: 60 },
                    { text: "Leave it to create fear among the crew", goto: 61 }
                ]
            },
            34: {
                text: "Dimitri stumbles away, confused. You've fed without killing, but he'll report strange weakness. The crew's suspicion grows moderately. Another day passes.",
                effect: { suspicion: 1, days: 1 },
                goto: 62
            },
            35: {
                text: "After defeating Dimitri, you feed. The body is in the hold. Morning is coming - you should return to your coffin.",
                effect: { hunger: -3 },
                crewEffect: { sailor1: false },
                goto: 63
            },
            36: {
                text: "You leave the hold. The ship is quiet. Moonlight filters through cracks. Where will you hunt tonight?",
                options: [
                    { text: "Galley - the cook might be preparing morning meal", goto: 64 },
                    { text: "Crew Quarters - sleeping sailors are easy prey", goto: 65 },
                    { text: "Deck - the night watch is alone", goto: 66 }
                ]
            },
            37: {
                text: "You wait another night. The hunger becomes agony. You lose control, bursting from your coffin and attacking the next person who enters. It's <span class='crew-member'>First Mate Ivan</span> doing an inspection!",
                effect: { hunger: 3 },
                enemy: "first_mate",
                afterCombat: 67,
                goto: "combat"
            },
            38: {
                text: "You hide Sergei's body well among the cargo. It might not be found for days. The crew will notice he's missing, but won't find evidence in the hold.",
                goto: 68
            },
            39: {
                text: "You try to hide the body but do a poor job. Blood trails are visible. When the crew searches, they'll find it easily.",
                effect: { suspicion: 2 },
                goto: 68
            },
            40: {
                text: "You carry the body to the deck. It's dark, but <span class='crew-member'>Lookout Yuri</span> is in the crow's nest. Test your Stealth to throw the body overboard unseen.",
                skill: "stealth",
                difficulty: 9,
                success: { text: "You dispose of the body without being seen.", goto: 69 },
                failure: { text: "The lookout sees you! He sounds the alarm!", effect: { suspicion: 4 }, enemy: "lookout", afterCombat: 70, goto: "combat" }
            },
            41: {
                text: "You leave the body where it fell. When the crew finds it, panic will ensue. Suspicion will be high, but fear might work to your advantage.",
                effect: { suspicion: 3 },
                goto: 71
            },
            42: {
                text: "Another day passes. The crew is nervous. Sergei reports feeling weak and seeing 'shadows.' Some crew want to search the hold thoroughly. Captain Demeter agrees to a search at dawn. You have one more night before they discover your coffins.",
                effect: { days: 1 },
                options: [
                    { text: "Attack the crew tonight to thin their numbers", goto: 72 },
                    { text: "Create a diversion to delay the search", goto: 73 },
                    { text: "Prepare to defend your coffins", goto: 74 }
                ]
            },
            43: {
                text: "You enter the galley. <span class='crew-member'>Cook Petrov</span> is asleep in the corner, exhausted from preparing meals. He's alone and vulnerable.",
                options: [
                    { text: "Feed on the sleeping cook", goto: 75 },
                    { text: "Steal knives and supplies", goto: 76 },
                    { text: "Poison the food", goto: 26 }
                ]
            },
            44: {
                text: "The <span class='ship-area'>crew quarters</span> are dark. Six hammocks swing with the ship's motion. Three are occupied: <span class='crew-member'>Sailor Alexei</span>, and two others you don't recognize. They're deep in sleep.",
                options: [
                    { text: "Feed on Alexei", goto: 77 },
                    { text: "Feed on an unknown sailor", goto: 78 },
                    { text: "Take something from their belongings", goto: 79 }
                ]
            },
            45: {
                text: "You return to your coffin. The familiar earth restores you slightly. You sleep through the day, healing your wounds.",
                effect: { stamina: 2, days: 1 },
                goto: 80
            },
            46: {
                text: "You overcome <span class='crew-member'>Captain Demeter</span> and feed deeply. With the captain dead, the ship will be in chaos. However, this means no one is navigating the ship to England!",
                effect: { hunger: -5, suspicion: 4 },
                crewEffect: { captain: false },
                goto: 81
            },
            47: {
                text: "You retreat from the captain's cabin, wounded. The cross burned your flesh. You need to feed to heal, but the captain is now alert and armed.",
                goto: 82
            },
            48: {
                text: "With knowledge from the log, you know the crew's suspicions. You could use this information. The captain finishes writing and blows out his lamp. He's going to sleep.",
                options: [
                    { text: "Attack him while he sleeps", goto: 83 },
                    { text: "Leave and hunt elsewhere", goto: 36 }
                ]
            },
            49: {
                text: "The captain opens the door and looks around. You've turned to mist, so he sees nothing. 'Must be the wind,' he mutters, closing the door. You drift away.",
                goto: 84
            },
            50: {
                text: "You defeat the cook and feed. The galley is now a mess of blood and broken dishes. The crew will discover this in the morning. What do you do?",
                effect: { hunger: -3 },
                crewEffect: { cook: false },
                options: [
                    { text: "Clean up the evidence", skill: "stealth", difficulty: 10, success: 85, failure: 86 },
                    { text: "Make it look like an accident", goto: 87 },
                    { text: "Leave it to spread terror", goto: 88 }
                ]
            },
            51: {
                text: "You've poisoned the food. Tomorrow, the crew will grow weak and sick. This makes them easier targets but also increases suspicion of foul play. You return to your coffin.",
                effect: { days: 1 },
                goto: 89
            },
            52: {
                text: "You hide the stolen food. Tomorrow's accusations will divide the crew. You return to your coffin as dawn approaches.",
                effect: { days: 1 },
                goto: 90
            },
            53: {
                text: "The ship is in panic. The remaining crew barricade themselves in the captain's cabin. They're terrified but armed with whatever weapons they can find. You're wounded but have the run of the ship. What now?",
                options: [
                    { text: "Attack the barricaded crew", enemy: "desperate_crew", afterCombat: 91, goto: "combat" },
                    { text: "Wait for them to starve or go mad", goto: 92 },
                    { text: "Try to negotiate or trick them", skill: "domination", difficulty: 12, success: 93, failure: 94 }
                ]
            },
            54: {
                text: "The crew finds Sergei's body and carries it away. They're horrified but don't find you. 'It must be a stowaway!' one shouts. 'Search every crate!' They begin a thorough search that will take hours.",
                options: [
                    { text: "Remain hidden", skill: "stealth", difficulty: 11, success: 95, failure: 96 },
                    { text: "Attack while they're distracted", goto: 97 },
                    { text: "Escape while they search", goto: 98 }
                ]
            },
            55: {
                text: "You defeat the search party, but the noise alerts the entire ship. The remaining crew now knows exactly what they're facing. They'll be preparing for a final confrontation.",
                effect: { suspicion: 10 },
                goto: 99
            },
            56: {
                text: "The forecastle is dark and filled with ropes, chains, and spare sails. It's a good hiding place. You can hear the crew searching the hold below. They won't find you here. You wait until they give up.",
                effect: { days: 1 },
                goto: 100
            },
            57: {
                text: "Night falls again. The hunger is painful now. You must feed tonight or risk losing control. The crew is on edge, speaking in whispers. Some are armed. Where will you hunt?",
                options: [
                    { text: "The crew quarters - attack sleeping sailors", goto: 101 },
                    { text: "The deck - take out the lookout first", goto: 102 },
                    { text: "The galley - the cook is always alone at night", goto: 103 }
                ]
            },
            58: {
                text: "You carry Dimitri's body to the deck. The night is foggy - good cover. You heave the body over the railing. It disappears into the dark sea. No one saw you.",
                goto: 104
            },
            59: {
                text: "You hide Dimitri's body expertly in a crate marked 'Machine Parts.' It won't be found unless someone opens that specific crate.",
                goto: 105
            },
            60: {
                text: "You try to hide the body but leave bloodstains. The crew will follow the trail when they investigate his disappearance.",
                effect: { suspicion: 2 },
                goto: 105
            },
            61: {
                text: "You leave Dimitri's body where it fell. When the crew finds it, terror will spread. Some may jump ship or go mad with fear. This could work to your advantage.",
                effect: { suspicion: 4 },
                goto: 106
            },
            62: {
                text: "Another day. The crew is tense. Dimitri reports 'nightmares' and weakness. The captain orders the hold searched at noon. You have limited time.",
                effect: { days: 1 },
                options: [
                    { text: "Attack before they search", goto: 107 },
                    { text: "Hide your coffins", goto: 108 },
                    { text: "Create a diversion elsewhere", goto: 109 }
                ]
            },
            63: {
                text: "You return to your coffin as dawn approaches. You'll sleep through the day while the crew discovers Dimitri is missing. Tomorrow night will be more dangerous.",
                effect: { days: 1 },
                goto: 110
            },
            64: {
                text: "The galley is warm. <span class='crew-member'>Cook Petrov</span> is kneading dough for tomorrow's bread. He's alone, humming a tune. The smell of his blood (from a cut on his hand) is maddening.",
                options: [
                    { text: "Attack immediately", goto: 111 },
                    { text: "Wait until he goes to sleep", goto: 112 },
                    { text: "Try to dominate him", skill: "domination", difficulty: 8, success: 113, failure: 114 }
                ]
            },
            65: {
                text: "The crew quarters are dark. Four sailors sleep in their hammocks. They're exhausted from the day's work and won't wake easily. You could feed on one without alerting the others.",
                options: [
                    { text: "Feed on Sailor Alexei", goto: 115 },
                    { text: "Feed on an unknown sailor", goto: 116 },
                    { text: "Feed on two sailors", goto: 117 }
                ]
            },
            66: {
                text: "The deck is cold and windy. <span class='crew-member'>Lookout Yuri</span> is in the crow's nest, scanning the horizon. <span class='crew-member'>First Mate Ivan</span> is at the wheel. They're far apart. You could take one without the other hearing.",
                options: [
                    { text: "Attack the lookout first", goto: 118 },
                    { text: "Attack the first mate", goto: 119 },
                    { text: "Create a noise to lure one away", goto: 120 }
                ]
            },
            67: {
                text: "You attack <span class='crew-member'>First Mate Ivan</span> in a frenzy! The fight is brutal. After feeding, you're sated but the ship's second-in-command is dead. The crew will be leaderless and panicked.",
                effect: { hunger: -5, suspicion: 5 },
                crewEffect: { first_mate: false },
                goto: 121
            },
            68: {
                text: "Morning comes. The crew gathers on deck for roll call. 'Where's Sergei?' the captain asks. No one knows. 'Search the ship!' he orders. The hunt begins.",
                effect: { days: 1 },
                goto: 122
            },
            69: {
                text: "The body sinks into the dark waters. The lookout saw nothing. Sergei will be listed as 'lost overboard' - a common enough tragedy at sea. Suspicion rises, but not as much as if they found a body.",
                effect: { suspicion: 2, days: 1 },
                goto: 123
            },
            70: {
                text: "The lookout shouts 'Man overboard! Murder!' The ship erupts in chaos. Crew members rush to the deck armed with belaying pins and knives. You're surrounded!",
                enemy: "entire_crew",
                afterCombat: 124,
                goto: "combat"
            },
            71: {
                text: "Morning. The crew finds Sergei's body in the hold. Panic spreads. 'There's a murderer on board!' some shout. The captain tries to maintain order, but fear has taken hold.",
                effect: { suspicion: 5, days: 1 },
                goto: 125
            },
            72: {
                text: "You decide to thin the crew's numbers before they can search. You'll attack the crew quarters tonight, trying to take out as many as possible.",
                enemy: "sleeping_crew",
                afterCombat: 126,
                goto: "combat"
            },
            73: {
                text: "You need a diversion. You could start a fire, sabotage the ship, or frame a crew member. What do you do?",
                options: [
                    { text: "Start a small fire in the galley", goto: 127 },
                    { text: "Cut the rigging to create chaos", goto: 128 },
                    { text: "Steal the captain's log and hide it in a sailor's bunk", goto: 129 }
                ]
            },
            74: {
                text: "You prepare to defend your coffins. You'll fight anyone who tries to open them. But if they break the coffins or expose them to sunlight, you're finished.",
                options: [
                    { text: "Set traps around the coffins", goto: 130 },
                    { text: "Hide nearby and ambush searchers", goto: 131 },
                    { text: "Move the coffins to a new location", goto: 132 }
                ]
            },
            // Continuing from section 74 in the gamebook object...

75: {
    text: "You feed on the sleeping <span class='crew-member'>Cook Petrov</span>. He doesn't wake up. You take just enough blood to sate your hunger without killing him. He'll be weak and pale tomorrow, but alive.",
    effect: { hunger: -3 },
    options: [
        { text: "Leave the galley quietly", goto: 133 },
        { text: "Search the galley for useful items", goto: 134 },
        { text: "Poison the remaining food", goto: 135 }
    ]
},
76: {
    text: "You find several sharp kitchen knives and a cleaver. These could be useful as weapons or for creating diversions. You also find a bottle of strong spirits.",
    addItem: "kitchen_knives",
    options: [
        { text: "Take the weapons and leave", goto: 136 },
        { text: "Use the spirits to start a fire", goto: 137 },
        { text: "Leave everything and return to your coffin", goto: 138 }
    ]
},
77: {
    text: "You approach <span class='crew-member'>Sailor Alexei</span>'s hammock. He's deep in sleep, muttering about home. You feed quietly, being careful not to wake the other sailors.",
    effect: { hunger: -4 },
    crewEffect: { sailor2: false },
    options: [
        { text: "Leave the crew quarters", goto: 139 },
        { text: "Feed on another sailor", goto: 140 },
        { text: "Search the sailors' belongings", goto: 141 }
    ]
},
78: {
    text: "You choose an unknown sailor. He's young, barely a man. You feed quickly and efficiently. The other sailors stir in their sleep but don't wake.",
    effect: { hunger: -4 },
    options: [
        { text: "Leave before you're discovered", goto: 142 },
        { text: "Try to dominate the remaining sailors", skill: "domination", difficulty: 11, success: 143, failure: 144 }
    ]
},
79: {
    text: "You search through the sailors' personal belongings. You find a silver cross (which burns your hand), some letters, a few coins, and a small pistol with two bullets.",
    addItem: "sailor_pistol",
    options: [
        { text: "Take the pistol and leave", goto: 145 },
        { text: "Destroy the silver cross", goto: 146 },
        { text: "Leave everything and return to your coffin", goto: 147 }
    ]
},
80: {
    text: "You sleep in your coffin through the day. The earth restores you. When you awaken at night, you feel stronger but the hunger has grown.",
    effect: { hunger: 2, days: 1 },
    goto: 148
},
81: {
    text: "With the captain dead, the ship drifts without leadership. <span class='crew-member'>First Mate Ivan</span> takes command, but he's inexperienced. The crew is terrified. You have the run of the ship at night, but no one is navigating to England.",
    options: [
        { text: "Continue hunting the crew", goto: 149 },
        { text: "Try to learn navigation yourself", goto: 150 },
        { text: "Dominate the first mate to continue the voyage", skill: "domination", difficulty: 12, success: 151, failure: 152 }
    ]
},
82: {
    text: "Wounded and hungry, you need to feed to heal. The captain is now alert, but the rest of the ship sleeps. Where will you hunt?",
    options: [
        { text: "Try the crew quarters", goto: 153 },
        { text: "Return to the hold to heal with earth", goto: 154 },
        { text: "Attack the first mate on deck", goto: 155 }
    ]
},
83: {
    text: "You wait until <span class='crew-member'>Captain Demeter</span> is asleep. He sleeps fitfully, troubled by nightmares. You approach silently. Will you:",
    options: [
        { text: "Kill him in his sleep", goto: 156 },
        { text: "Dominate him to become your puppet", skill: "domination", difficulty: 10, success: 157, failure: 158 },
        { text: "Just feed without killing", goto: 159 }
    ]
},
84: {
    text: "You drift away from the captain's cabin. The night is half gone. You need to feed soon. Where will you go?",
    options: [
        { text: "The galley", goto: 64 },
        { text: "The crew quarters", goto: 65 },
        { text: "Return to the hold", goto: 1 }
    ]
},
85: {
    text: "You meticulously clean the galley, disposing of the cook's body overboard and washing away the blood. It takes hours, but when you're done, there's no evidence. The crew will think the cook fell overboard.",
    effect: { suspicion: 1 },
    goto: 160
},
86: {
    text: "You try to clean up but leave traces. Bloodstains remain, and the broken dishes are obvious. The crew will know something terrible happened here.",
    effect: { suspicion: 4 },
    goto: 161
},
87: {
    text: "You stage the scene to look like an accident - the cook slipped and hit his head on the stove. It's plausible, though some crew might be suspicious.",
    effect: { suspicion: 2 },
    goto: 162
},
88: {
    text: "You leave the bloody scene as it is. When the crew finds it, terror will spread. Some may jump overboard or go mad with fear.",
    effect: { suspicion: 5 },
    goto: 163
},
89: {
    text: "Dawn approaches. You return to your coffin. Tomorrow, the crew will eat the poisoned food and grow weak. This will make them easier prey tomorrow night.",
    effect: { days: 1 },
    goto: 164
},
90: {
    text: "You return to your coffin as dawn breaks. Tomorrow's accusations about the stolen food will divide the crew, lowering their suspicion of you.",
    effect: { days: 1 },
    goto: 165
},
91: {
    text: "You attack the barricaded crew. They're desperate but determined, armed with whatever weapons they could find.",
    enemy: "desperate_crew",
    afterCombat: 166,
    goto: "combat"
},
92: {
    text: "You wait. Days pass. The crew in the captain's cabin grows hungry and thirsty. They argue amongst themselves. Some want to surrender, others want to fight. After three days, you hear a single gunshot, then silence.",
    effect: { days: 3 },
    options: [
        { text: "Investigate the cabin", goto: 167 },
        { text: "Continue waiting", goto: 168 }
    ]
},
93: {
    text: "Using your domination, you whisper through the door, promising safe passage if they surrender. Their minds, weakened by fear, are vulnerable. They agree to come out one by one.",
    effect: { suspicion: -2 },
    options: [
        { text: "Feed on them as they emerge", goto: 169 },
        { text: "Let them live and dominate them to sail the ship", goto: 170 }
    ]
},
94: {
    text: "Your attempt at negotiation fails! They recognize your voice and become even more determined. 'It's the demon! Don't listen!' they shout. They're preparing for a final stand.",
    effect: { suspicion: 2 },
    enemy: "desperate_crew",
    afterCombat: 171,
    goto: "combat"
},
95: {
    text: "You remain perfectly still as the crew searches the hold. They open crates, move cargo, but don't find your coffin. After hours, they give up. 'Maybe he really did fall overboard,' one says.",
    effect: { suspicion: -1, days: 1 },
    goto: 172
},
96: {
    text: "You're discovered! A sailor opens your coffin just as dawn breaks. Sunlight streams in, burning you!",
    effect: { stamina: -8 },
    options: [
        { text: "Attack despite the burns", enemy: "sunlight_burned", afterCombat: 173, goto: "combat" },
        { text: "Try to close the coffin lid", skill: "strength", difficulty: 12, success: 174, failure: 175 }
    ]
},
97: {
    text: "While the crew is distracted searching crates, you attack from behind!",
    enemy: "distracted_crew",
    afterCombat: 176,
    goto: "combat"
},
98: {
    text: "You slip out of the hold while the crew searches. You go to the <span class='ship-area'>forecastle</span> to hide until night falls again.",
    goto: 177
},
99: {
    text: "The entire crew now knows about you. They're terrified but preparing for a final battle. They gather weapons, make stakes, and draw crosses on doors. The ship has become a battleground.",
    options: [
        { text: "Attack them immediately", enemy: "prepared_crew", afterCombat: 178, goto: "combat" },
        { text: "Hide and wait for them to make a mistake", goto: 179 },
        { text: "Try to divide them further", goto: 180 }
    ]
},
100: {
    text: "You wait in the forecastle as the crew searches the ship. They never think to look here. Hours pass, and they give up. You've survived another day.",
    effect: { days: 1 },
    goto: 181
},
101: {
    text: "The <span class='ship-area'>crew quarters</span> are dark. Four sailors sleep soundly. You can take them one by one.",
    options: [
        { text: "Attack the nearest sailor", goto: 182 },
        { text: "Use domination on all of them", skill: "domination", difficulty: 13, success: 183, failure: 184 },
        { text: "Set the room on fire and attack them as they flee", goto: 185 }
    ]
},
102: {
    text: "The <span class='ship-area'>deck</span> is cold and windy. <span class='crew-member'>Lookout Yuri</span> is in the crow's nest. You could climb up and attack him, or wait for him to come down.",
    options: [
        { text: "Climb to the crow's nest", goto: 186 },
        { text: "Wait for him to come down for his break", goto: 187 },
        { text: "Create a noise to lure him down", goto: 188 }
    ]
},
103: {
    text: "The <span class='ship-area'>galley</span> is empty. The cook is asleep in his bunk nearby. You could attack him there, or search the galley for supplies.",
    options: [
        { text: "Attack the sleeping cook", goto: 189 },
        { text: "Search the galley", goto: 190 },
        { text: "Set a trap in the galley for tomorrow", goto: 191 }
    ]
},
104: {
    text: "The body sinks into the dark sea. No one saw you. Dimitri will be listed as 'lost at sea' - a common enough occurrence. Suspicion rises moderately.",
    effect: { suspicion: 2, days: 1 },
    goto: 192
},
105: {
    text: "You hide the body well. The crew will notice Dimitri is missing but won't find the body. They'll assume he fell overboard.",
    effect: { suspicion: 2, days: 1 },
    goto: 193
},
106: {
    text: "Morning comes. The crew finds Dimitri's body in the hold. Panic spreads. Two sailors want to abandon ship in the lifeboat. The captain struggles to maintain order.",
    effect: { suspicion: 5, days: 1 },
    options: [
        { text: "Let the panic spread", goto: 194 },
        { text: "Attack the sailors trying to flee", goto: 195 },
        { text: "Dominate the captain to restore order", skill: "domination", difficulty: 11, success: 196, failure: 197 }
    ]
},
107: {
    text: "You decide to attack the crew before they can search the hold. You'll take them by surprise during the night.",
    enemy: "night_watch",
    afterCombat: 198,
    goto: "combat"
},
108: {
    text: "You move your coffins to a different part of the hold, covering them with cargo. It's exhausting work, but when the crew searches, they won't find them.",
    effect: { stamina: -2 },
    goto: 199
},
109: {
    text: "You need to create a diversion to delay the search. You could start a fire, cut the rigging, or sabotage the ship's wheel.",
    options: [
        { text: "Start a small fire in the forecastle", goto: 200 },
        { text: "Cut the main sail rigging", goto: 201 },
        { text: "Disable the ship's wheel", goto: 202 }
    ]
},
110: {
    text: "You sleep through the day. When night falls, you awaken to find the crew in turmoil. Dimitri is missing, and they're organizing search parties. The ship is on high alert.",
    effect: { suspicion: 3, days: 1 },
    goto: 203
},
111: {
    text: "You attack <span class='crew-member'>Cook Petrov</span>! He fights back with surprising strength, wielding a rolling pin.",
    enemy: "angry_cook",
    afterCombat: 204,
    goto: "combat"
},
112: {
    text: "You wait patiently until the cook finishes his work and goes to his bunk. He falls asleep quickly, exhausted from the day's work. He's vulnerable now.",
    effect: { hunger: 1 },
    goto: 205
},
113: {
    text: "You dominate the cook's mind. He stops kneading dough and stands still, eyes glazed. 'Come here,' you command. He obeys. You feed without a struggle.",
    effect: { hunger: -3 },
    options: [
        { text: "Leave him alive but dominated", goto: 206 },
        { text: "Kill him to eliminate a witness", goto: 207 }
    ]
},
114: {
    text: "Your domination fails! The cook sees your glowing eyes and screams, 'Demon!' He grabs a meat cleaver!",
    enemy: "terrified_cook",
    afterCombat: 208,
    goto: "combat"
},
115: {
    text: "You feed on <span class='crew-member'>Sailor Alexei</span>. He dreams of home as you drink his blood. He doesn't wake up, but grows pale and cold.",
    effect: { hunger: -4 },
    crewEffect: { sailor2: false },
    goto: 209
},
116: {
    text: "You choose a young sailor you don't recognize. He's new to the sea. You feed quickly. He moans in his sleep but doesn't wake.",
    effect: { hunger: -4 },
    options: [
        { text: "Leave immediately", goto: 210 },
        { text: "Feed on another sailor", goto: 211 }
    ]
},
117: {
    text: "You decide to feed on two sailors. You move silently between hammocks, taking blood from each. It's risky - if one wakes, they'll all wake.",
    skill: "stealth",
    difficulty: 12,
    success: { 
        text: "You successfully feed on two sailors without waking anyone.", 
        effect: { hunger: -6 },
        goto: 212 
    },
    failure: { 
        text: "One sailor wakes up! He sees you and screams!", 
        enemy: "awakened_crew",
        afterCombat: 213,
        goto: "combat"
    }
},
118: {
    text: "You climb silently to the crow's nest. <span class='crew-member'>Lookout Yuri</span> is scanning the horizon. You attack from behind!",
    enemy: "lookout",
    afterCombat: 214,
    goto: "combat"
},
119: {
    text: "You approach <span class='crew-member'>First Mate Ivan</span> at the wheel. He's focused on steering, watching the compass. You could attack from behind, or try to dominate him.",
    options: [
        { text: "Attack from behind", goto: 215 },
        { text: "Try to dominate him first", skill: "domination", difficulty: 10, success: 216, failure: 217 }
    ]
},
120: {
    text: "You create a noise by the starboard railing - a loud thump as if something fell overboard. The first mate hears it and goes to investigate, leaving the wheel unattended.",
    options: [
        { text: "Attack the first mate while he's investigating", goto: 218 },
        { text: "Attack the lookout while the first mate is distracted", goto: 219 },
        { text: "Sabotage the ship's wheel", goto: 220 }
    ]
},
121: {
    text: "With the first mate dead, the ship has no experienced navigator. The remaining crew are terrified. Some want to turn back, others want to continue to England. The ship drifts.",
    options: [
        { text: "Continue hunting the confused crew", goto: 221 },
        { text: "Try to dominate a sailor to navigate", goto: 222 },
        { text: "Wait and see what happens", goto: 223 }
    ]
},
122: {
    text: "The crew searches the ship all day. They find nothing, but their suspicion grows. They're now certain something is wrong. The captain orders watches doubled and weapons distributed.",
    effect: { suspicion: 3, days: 1 },
    goto: 224
},
123: {
    text: "Another day passes. The crew is nervous but continues their duties. They hold a brief memorial for Sergei. The captain increases security. Night falls again.",
    effect: { days: 1 },
    goto: 225
},
124: {
    text: "You fight the entire crew! It's a desperate battle on the rolling deck.",
    enemy: "entire_crew",
    afterCombat: 226,
    goto: "combat"
},
125: {
    text: "The crew is in panic. Some want to abandon ship. The captain tries to maintain order but fear has taken hold. The ship's routine breaks down.",
    options: [
        { text: "Attack while they're disorganized", goto: 227 },
        { text: "Let the panic spread and pick them off one by one", goto: 228 },
        { text: "Try to dominate the most frightened sailor", goto: 229 }
    ]
},
126: {
    text: "You attack the sleeping crew. They're easy prey, but there are many of them.",
    enemy: "sleeping_crew",
    afterCombat: 230,
    goto: "combat"
},
127: {
    text: "You start a small fire in the galley using cooking oil and rags. Soon, smoke fills the area. 'Fire!' someone shouts. The crew rushes to put it out, forgetting about the search.",
    effect: { suspicion: -1 },
    goto: 231
},
128: {
    text: "You cut several important ropes in the rigging. At dawn, when the crew tries to adjust the sails, they'll come crashing down. Chaos will ensue.",
    goto: 232
},
129: {
    text: "You steal the captain's log and hide it in a sailor's bunk. When it's discovered, the sailor will be accused of theft, creating discord among the crew.",
    effect: { suspicion: -2 },
    goto: 233
},
130: {
    text: "You set traps around your coffins - tripwires connected to falling crates, sharpened stakes, and other dangers. Anyone searching will be in for a nasty surprise.",
    addItem: "coffin_traps",
    goto: 234
},
131: {
    text: "You hide near your coffins, ready to ambush anyone who approaches. It's risky - if they come in numbers, you could be overwhelmed.",
    options: [
        { text: "Wait in ambush", goto: 235 },
        { text: "Set additional traps first", goto: 236 },
        { text: "Hide nearby but ready to flee", goto: 237 }
    ]
},
132: {
    text: "Moving the heavy coffins is difficult work. You must do it quietly and before dawn. Where will you move them?",
    options: [
        { text: "To the forecastle storage", goto: 238 },
        { text: "To an empty cargo area in the hold", goto: 239 },
        { text: "To the captain's cabin (risky but unexpected)", goto: 240 }
    ]
},
133: {
    text: "You leave the galley quietly. The cook will wake weak and confused. You've fed without killing, which keeps suspicion lower.",
    effect: { suspicion: 1 },
    goto: 241
},
134: {
    text: "You search the galley and find useful items: knives, a meat tenderizer, spices that could be used as poisons, and a bottle of strong alcohol.",
    addItem: "galley_supplies",
    options: [
        { text: "Take what you can carry and leave", goto: 242 },
        { text: "Use the alcohol to start a fire", goto: 243 },
        { text: "Poison the food with the spices", goto: 244 }
    ]
},
135: {
    text: "You add strange herbs and powders to the crew's food stores. They'll become sick tomorrow, weakening them and making them easier prey.",
    effect: { suspicion: 2 },
    addItem: "poisoned_supplies",
    goto: 245
},
136: {
    text: "You take the kitchen knives and cleaver. These crude weapons could be useful. You slip out of the galley and return to the hold.",
    goto: 246
},
137: {
    text: "You pour the spirits around the galley and light them with a match from the stove. Fire quickly spreads! 'Fire! Fire in the galley!' shouts a crew member.",
    effect: { suspicion: 4 },
    options: [
        { text: "Escape in the confusion", goto: 247 },
        { text: "Attack crew members fighting the fire", goto: 248 }
    ]
},
138: {
    text: "You leave everything and return to your coffin. Dawn is approaching. You'll sleep through the day and hunt again tomorrow night.",
    effect: { days: 1 },
    goto: 249
},
139: {
    text: "You slip out of the crew quarters, leaving Alexei pale and weak but alive. He'll report strange weakness in the morning, increasing suspicion.",
    effect: { suspicion: 2 },
    goto: 250
},
140: {
    text: "Your hunger isn't fully sated. You move to another sailor. This one is older, with a thick beard. You feed again.",
    effect: { hunger: -3 },
    options: [
        { text: "Leave after feeding", goto: 251 },
        { text: "Try to feed on a third sailor", goto: 252 }
    ]
},
141: {
    text: "You search through the sailors' personal items. You find a Bible (which burns your fingers), a lock of hair, some coins, a pocket watch, and a small knife.",
    addItem: "sailor_knife",
    options: [
        { text: "Take the knife and leave", goto: 253 },
        { text: "Destroy the Bible", goto: 254 },
        { text: "Take the pocket watch as a trophy", goto: 255 }
    ]
},
142: {
    text: "You leave the crew quarters before anyone wakes. The young sailor will be dead by morning, another mystery for the crew.",
    effect: { suspicion: 3 },
    goto: 256
},
143: {
    text: "You extend your domination to all the sleeping sailors. Their dreams become nightmares they can't wake from. They'll sleep fitfully and wake exhausted.",
    effect: { suspicion: 1 },
    goto: 257
},
144: {
    text: "Your domination attempt fails! One sailor wakes up screaming from a nightmare! He sees you and shouts, 'It's here! In our quarters!'",
    enemy: "awakened_sailors",
    afterCombat: 258,
    goto: "combat"
},
145: {
    text: "You take the pistol and bullets. It's an old but serviceable weapon. Two shots could be decisive in a tight situation.",
    addItem: "loaded_pistol",
    goto: 259
},
146: {
    text: "You destroy the silver cross, melting it in the galley stove. The holy symbol's destruction gives you a sense of relief.",
    effect: { stamina: 1 },
    goto: 260
},
147: {
    text: "You leave everything and return to your coffin. Personal items of sailors mean nothing to you. You need blood, not trinkets.",
    effect: { days: 1 },
    goto: 261
},
148: {
    text: "Night has fallen again. The hunger has grown during your day's rest. You must feed tonight. The crew is on edge after previous nights' events.",
    options: [
        { text: "Hunt on the deck", goto: 262 },
        { text: "Hunt in the crew quarters", goto: 263 },
        { text: "Hunt in the galley", goto: 264 }
    ]
},
149: {
    text: "With the crew terrified and leaderless, you continue hunting. They're easy prey now, hiding in corners and jumping at shadows.",
    options: [
        { text: "Hunt the remaining crew members", enemy: "terrified_crew", afterCombat: 265, goto: "combat" },
        { text: "Let a few survive to sail the ship", goto: 266 }
    ]
},
150: {
    text: "You study the navigation charts in the captain's cabin. The concepts are foreign to you, but you grasp the basics. The ship is heading west to England. If no one steers, it will drift off course.",
    skill: "intelligence",
    difficulty: 14,
    success: { 
        text: "You learn enough to steer the ship toward England.", 
        goto: 267 
    },
    failure: { 
        text: "The charts make no sense to you. The ship drifts aimlessly.", 
        goto: 268 
    }
},
151: {
    text: "You dominate <span class='crew-member'>First Mate Ivan</span>'s mind. He becomes your puppet, continuing to navigate the ship to England while you hide. The crew obeys him, unaware he serves you.",
    effect: { suspicion: -3 },
    goto: 269
},
152: {
    text: "Your domination attempt fails! The first mate resists, his strong will overcoming your power. He realizes what you are and attacks!",
    enemy: "first_mate",
    afterCombat: 270,
    goto: "combat"
},
153: {
    text: "The crew quarters are your best chance. Sleeping sailors are easy prey, and feeding will heal your wounds.",
    goto: 271
},
154: {
    text: "You return to your coffin and use the sacred earth to heal. It's slow but safe. You'll lose another night of hunting, but you'll recover.",
    effect: { stamina: 3, hunger: 1, days: 1 },
    goto: 272
},
155: {
    text: "You attack <span class='crew-member'>First Mate Ivan</span> on the deck. He's armed with a pistol!",
    enemy: "armed_first_mate",
    afterCombat: 273,
    goto: "combat"
},
156: {
    text: "You kill the sleeping captain. With his death, the ship loses its leader. Chaos will follow, making the crew easier prey.",
    effect: { hunger: -5, suspicion: 4 },
    crewEffect: { captain: false },
    goto: 274
},
157: {
    text: "You dominate the captain's mind. He becomes your puppet, continuing to command the ship while secretly serving you. The crew follows his orders, unaware of his true master.",
    effect: { suspicion: -2 },
    goto: 275
},
158: {
    text: "Your domination fails! The captain wakes up and sees you! He grabs a pistol from his bedside table!",
    enemy: "captain",
    afterCombat: 276,
    goto: "combat"
},
159: {
    text: "You feed on the sleeping captain without killing him. He'll wake weak and pale, but alive. His leadership will be compromised, but the ship will continue toward England.",
    effect: { hunger: -4, suspicion: 2 },
    goto: 277
},
160: {
    text: "You return to your coffin as dawn approaches. The crew will discover the cook missing in the morning. They'll assume he fell overboard. Suspicion rises slightly.",
    effect: { days: 1 },
    goto: 278
},
161: {
    text: "You return to your coffin. In the morning, the crew will find the bloody galley. Terror will spread through the ship.",
    effect: { days: 1 },
    goto: 279
},
162: {
    text: "You return to your coffin. The staged accident might fool some crew members, but others will be suspicious.",
    effect: { days: 1 },
    goto: 280
},
163: {
    text: "You return to your coffin, leaving the bloody scene for the crew to find. When they do, panic will consume the ship.",
    effect: { days: 1 },
    goto: 281
},
164: {
    text: "You sleep through the day. When night falls, you awaken to find the crew weak and sick from the poisoned food. They're easy prey tonight.",
    effect: { suspicion: 2, days: 1 },
    goto: 282
},
165: {
    text: "You sleep through the day. When night falls, you hear the crew arguing about the stolen food. Accusations fly, and fights break out. The crew is divided.",
    effect: { suspicion: -1, days: 1 },
    goto: 283
},
166: {
    text: "You defeat the desperate crew. The ship is now yours. But with no one to sail it, you're adrift at sea.",
    effect: { hunger: -5 },
    options: [
        { text: "Try to learn navigation", goto: 284 },
        { text: "Wait for another ship to come near", goto: 285 },
        { text: "Abandon the Demeter when land is sighted", goto: 286 }
    ]
},
167: {
    text: "You approach the captain's cabin. The door is barricaded but quiet. You break in and find all three crew members dead - two by gunshot, one by suicide. The ship is now completely yours.",
    effect: { crewAlive: 0 },
    goto: 287
},
168: {
    text: "You wait another day. There are no more sounds from the cabin. On the third day, you break in and find all crew members dead. The ship drifts with no living souls except you.",
    effect: { days: 2, crewAlive: 0 },
    goto: 288
},
169: {
    text: "As the crew members emerge one by one, you feed on them. They're too terrified to resist. Soon, the ship is silent except for the creaking of wood and the sea.",
    effect: { hunger: -8, crewAlive: 0 },
    goto: 289
},
170: {
    text: "You dominate the surviving crew members. They become your mindless slaves, sailing the ship to England under your command. You have complete control of the Demeter.",
    effect: { suspicion: 0 },
    goto: 290
},
171: {
    text: "You defeat the final crew members. The Demeter is now a ghost ship, carrying only you and your coffins to England.",
    effect: { crewAlive: 0 },
    goto: 291
},
172: {
    text: "The crew gives up their search. They're convinced Sergei fell overboard or maybe stowed away on another ship. Suspicion decreases slightly. Another night falls.",
    effect: { days: 1 },
    goto: 292
},
173: {
    text: "Despite the burns, you attack the sailor who opened your coffin!",
    enemy: "surprised_sailor",
    afterCombat: 293,
    goto: "combat"
},
174: {
    text: "You slam the coffin lid shut, blocking the sunlight. The sailor outside tries to open it again, but you hold it closed from inside.",
    options: [
        { text: "Wait until night", goto: 294 },
        { text: "Burst out and attack despite the sun", goto: 295 }
    ]
},
175: {
    text: "You fail to close the lid! Sunlight continues to burn you! The sailor sees you and screams for help!",
    effect: { stamina: -5 },
    enemy: "multiple_crew",
    afterCombat: 296,
    goto: "combat"
},
176: {
    text: "You attack the distracted crew from behind!",
    enemy: "search_party",
    afterCombat: 297,
    goto: "combat"
},
177: {
    text: "You hide in the forecastle as the crew searches. They never check here. You wait until night falls again.",
    effect: { days: 1 },
    goto: 298
},
178: {
    text: "You attack the prepared crew! They're armed and waiting, but you have the advantage of surprise and supernatural strength.",
    enemy: "final_stand",
    afterCombat: 299,
    goto: "combat"
},
179: {
    text: "You hide and wait. The crew grows nervous, jumping at shadows. Their vigilance wears them down. After two days, they begin to let their guard down.",
    effect: { days: 2 },
    goto: 300
},
180: {
    text: "You create signs and sounds to make the crew think there are multiple monsters aboard. They turn on each other, accusing companions of being the creature.",
    effect: { suspicion: -3 },
    goto: 301
},
181: {
    text: "Night falls again. The crew has given up their search, convinced the 'thing' is gone or was never real. They return to their duties, though nerves are frayed.",
    effect: { suspicion: -1 },
    goto: 302
},
182: {
    text: "You attack the nearest sailor. He wakes up choking, unable to scream. You feed quickly and move to the next.",
    effect: { hunger: -4 },
    options: [
        { text: "Attack another sailor", goto: 303 },
        { text: "Leave before others wake", goto: 304 }
    ]
},
183: {
    text: "You dominate all the sleeping sailors. They dream of you, their nightmares feeding your power. They'll wake exhausted and weak.",
    effect: { hunger: -2, suspicion: 1 },
    goto: 305
},
184: {
    text: "Your mass domination fails! One sailor with a strong will resists and wakes up screaming!",
    enemy: "resistant_sailor",
    afterCombat: 306,
    goto: "combat"
},
185: {
    text: "You set fire to the crew quarters using oil from a lantern. As flames spread, sailors wake up screaming and run out. You attack them in the corridor!",
    effect: { suspicion: 5 },
    enemy: "fleeing_crew",
    afterCombat: 307,
    goto: "combat"
},
186: {
    text: "You climb silently to the crow's nest. The lookout is focused on the horizon. You're almost upon him when he senses something and turns!",
    skill: "stealth",
    difficulty: 11,
    success: { 
        text: "You reach him before he can turn completely. Your hand covers his mouth.", 
        goto: 308 
    },
    failure: { 
        text: "He turns and sees you! 'Demon!' he screams, drawing a knife!", 
        enemy: "alerted_lookout",
        afterCombat: 309,
        goto: "combat"
    }
},
187: {
    text: "You wait patiently. After an hour, the lookout climbs down for his break. He goes to the galley for coffee. You follow.",
    goto: 310
},
188: {
    text: "You create a noise by the port railing - a heavy thud. The lookout hears it and calls down, 'What was that?' When no one answers, he climbs down to investigate.",
    goto: 311
},
189: {
    text: "You find the cook asleep in his small bunk near the galley. He's snoring loudly. You could feed on him without a struggle.",
    options: [
        { text: "Feed without killing", goto: 312 },
        { text: "Kill him to eliminate a witness", goto: 313 }
    ]
},
190: {
    text: "You search the galley and find useful supplies: knives, food that could be poisoned, a bottle of rum, and matches.",
    addItem: "matches",
    options: [
        { text: "Take the matches and rum", goto: 314 },
        { text: "Poison the food supplies", goto: 315 },
        { text: "Set a fire trap", goto: 316 }
    ]
},
191: {
    text: "You set a trap in the galley. When the cook lights the stove in the morning, it will cause a small explosion. It won't kill anyone but will create chaos.",
    goto: 317
},
192: {
    text: "Another day passes. The crew mourns Dimitri but accepts he was lost at sea. The captain increases safety measures. Night falls, and you must hunt again.",
    effect: { days: 1 },
    goto: 318
},
193: {
    text: "The crew searches for Dimitri but finds nothing. They assume he fell overboard. The captain orders life lines for anyone on deck at night. Suspicion is high.",
    effect: { days: 1 },
    goto: 319
},
194: {
    text: "You let the panic spread. Two sailors try to lower the lifeboat. The captain tries to stop them, and a fight breaks out. While they're distracted, you can pick them off.",
    goto: 320
},
195: {
    text: "You attack the sailors trying to abandon ship. They're focused on the lifeboat, not expecting an attack from behind.",
    enemy: "fleeing_sailors",
    afterCombat: 321,
    goto: "combat"
},
196: {
    text: "You dominate the captain's mind. He calms the crew, convincing them to stay aboard and continue to England. Order is restored, but at the cost of the captain's free will.",
    effect: { suspicion: -3 },
    goto: 322
},
197: {
    text: "Your domination attempt fails! The captain resists and sees you watching from the shadows! 'There! There it is!' he shouts, pointing at you!",
    enemy: "entire_crew",
    afterCombat: 323,
    goto: "combat"
},
198: {
    text: "You attack the night watch. They're tired and not expecting an attack.",
    enemy: "night_watch",
    afterCombat: 324,
    goto: "combat"
},
199: {
    text: "You successfully hide your coffins under cargo. The crew searches the hold but finds nothing unusual. They give up, confused. You've bought more time.",
    effect: { suspicion: -1, days: 1 },
    goto: 325
},
200: {
    text: "After days of terror, the Demeter drifts into Whitby harbor with no living crew aboard. You've survived the voyage and reached England! The ship runs aground, and your coffins are safe in the hold. You have successfully crossed the sea and can now begin your conquest of England.",
    victory: true,
    ending: "Terror of the Demeter",
    goto: "victory"
},
            
            // Adding sections 201-325 to complete the game

201: {
    text: "The ship reaches England with a handful of terrified, broken crew members. They tell tales of a monster, but no one believes them. You slip ashore unnoticed, ready to begin your new existence in England.",
    victory: true,
    ending: "Unnoticed Arrival",
    goto: "victory"
},

202: {
    text: "You are discovered! The remaining crew, armed with stakes and crosses, storm your coffin during the day. As sunlight hits you, you burst into flames. The voyage ends here, in the dark hold of the Demeter.",
    gameOver: true,
    ending: "Destroyed at Sea",
    goto: "gameover"
},

203: {
    text: "With no one to navigate the ship, the Demeter drifts lost at sea. Days turn to weeks. Your coffin earth runs out, and you weaken until you can no longer move. The ship becomes your tomb, drifting forever.",
    gameOver: true,
    ending: "Lost at Sea",
    goto: "gameover"
},

204: {
    text: "You defeat the angry cook. The galley is a mess of blood and broken dishes. You feed deeply, sating your hunger. What now?",
    effect: { hunger: -4 },
    crewEffect: { cook: false },
    options: [
        { text: "Clean up the evidence", skill: "stealth", difficulty: 10, success: 326, failure: 327 },
        { text: "Leave the mess to terrify the crew", goto: 328 },
        { text: "Set the galley on fire to destroy evidence", goto: 329 }
    ]
},

205: {
    text: "The cook sleeps soundly. You approach his bunk. He's vulnerable and won't wake up. Will you:",
    options: [
        { text: "Feed without killing", goto: 330 },
        { text: "Kill him to eliminate a witness", goto: 331 },
        { text: "Dominate him to serve you", skill: "domination", difficulty: 9, success: 332, failure: 333 }
    ]
},

206: {
    text: "You leave the cook alive but dominated. He'll continue his duties but will be your eyes and ears among the crew. He can also provide you with blood when needed.",
    effect: { suspicion: -1 },
    goto: 334
},

207: {
    text: "You kill the cook to eliminate a witness. His body lies in the galley. The crew will find it in the morning, causing panic.",
    effect: { suspicion: 4 },
    goto: 335
},

208: {
    text: "You defeat the terrified cook. He fought bravely but was no match for you.",
    effect: { hunger: -3 },
    crewEffect: { cook: false },
    options: [
        { text: "Dispose of the body", goto: 336 },
        { text: "Leave it to be found", goto: 337 }
    ]
},

209: {
    text: "Alexei is dead. You've fed well, but now there's a body in the crew quarters. Other sailors will find it when they wake. What do you do?",
    options: [
        { text: "Hide the body", skill: "stealth", difficulty: 11, success: 338, failure: 339 },
        { text: "Carry the body to throw overboard", goto: 340 },
        { text: "Leave it to create fear", goto: 341 }
    ]
},

210: {
    text: "You leave the crew quarters quickly. The young sailor will be found dead in the morning, another victim of the 'sickness' plaguing the ship.",
    effect: { suspicion: 3 },
    goto: 342
},

211: {
    text: "Your hunger isn't fully sated. You move to another sailor. This is risky - if you wake them, you'll have to fight multiple opponents.",
    skill: "stealth",
    difficulty: 13,
    success: { 
        text: "You feed on a second sailor without waking anyone.", 
        effect: { hunger: -3 },
        goto: 343 
    },
    failure: { 
        text: "The sailor wakes up and screams!", 
        enemy: "awakened_sailors",
        afterCombat: 344,
        goto: "combat"
    }
},

212: {
    text: "You successfully feed on two sailors. Both are now pale and weak. They'll survive but will be useless for work tomorrow. The crew's efficiency decreases, slowing the voyage.",
    effect: { suspicion: 2 },
    goto: 345
},

213: {
    text: "After defeating the awakened sailors, the crew quarters are a scene of carnage. You've fed well but the noise has alerted the entire ship.",
    effect: { hunger: -5, suspicion: 8 },
    options: [
        { text: "Fight your way out", enemy: "alerted_crew", afterCombat: 346, goto: "combat" },
        { text: "Hide in the crew quarters", goto: 347 },
        { text: "Transform to mist and escape", skill: "shapeshift", difficulty: 8, success: 348, failure: 349 }
    ]
},

214: {
    text: "You defeat the lookout. From the crow's nest, you have a view of the entire ship. You can see crew members running about below, alerted by the noise.",
    effect: { hunger: -3 },
    crewEffect: { lookout: false },
    options: [
        { text: "Climb down and attack the crew", goto: 350 },
        { text: "Stay in the crow's nest and wait", goto: 351 },
        { text: "Jump down as a bat", skill: "shapeshift", difficulty: 7, success: 352, failure: 353 }
    ]
},

215: {
    text: "You attack the first mate from behind. He doesn't see you coming. The fight is brief but fierce.",
    enemy: "first_mate",
    afterCombat: 354,
    goto: "combat"
},

216: {
    text: "You dominate the first mate's mind. He continues to steer the ship, but now he serves you. You can feel his will struggling against yours.",
    effect: { suspicion: -2 },
    options: [
        { text: "Feed on him while he's dominated", goto: 355 },
        { text: "Leave him to steer the ship", goto: 356 }
    ]
},

217: {
    text: "Your domination fails! The first mate turns and sees you. He draws his saber!",
    enemy: "first_mate",
    afterCombat: 357,
    goto: "combat"
},

218: {
    text: "While the first mate investigates the noise, you attack him from behind. He's caught completely by surprise.",
    enemy: "surprised_first_mate",
    afterCombat: 358,
    goto: "combat"
},

219: {
    text: "While the first mate is distracted, you climb to the crow's nest and attack the lookout.",
    enemy: "lookout",
    afterCombat: 359,
    goto: "combat"
},

220: {
    text: "You sabotage the ship's wheel, lashing it in place. The ship will now sail in a straight line. Without someone to adjust it, the ship might miss England entirely.",
    effect: { suspicion: 3 },
    goto: 360
},

221: {
    text: "The crew is in disarray. Some want to continue to England, others want to turn back, and a few want to abandon ship. You can pick them off easily in their confusion.",
    enemy: "confused_crew",
    afterCombat: 361,
    goto: "combat"
},

222: {
    text: "You need someone to navigate the ship. You search for the most experienced sailor remaining.",
    skill: "domination",
    difficulty: 11,
    success: { 
        text: "You find and dominate a sailor who knows navigation. He continues the voyage to England under your control.", 
        goto: 362 
    },
    failure: { 
        text: "No sailor knows navigation well enough. The ship drifts.", 
        goto: 363 
    }
},

223: {
    text: "You wait to see what happens. The crew argues for hours. Finally, a young sailor named Piotr takes command. He sets a course for England, but he's inexperienced.",
    effect: { days: 1 },
    goto: 364
},

224: {
    text: "The crew is now armed and vigilant. Watches are doubled. Everyone carries a weapon. The ship feels like a fortress under siege. Night falls, and you must decide how to hunt in these conditions.",
    options: [
        { text: "Attack the night watch directly", goto: 365 },
        { text: "Use shapeshifting to bypass their vigilance", skill: "shapeshift", difficulty: 9, success: 366, failure: 367 },
        { text: "Create a diversion to draw them away", goto: 368 }
    ]
},

225: {
    text: "Night falls on a nervous ship. The crew holds weapons tightly and jumps at every sound. Their fear is palpable. Where will you hunt tonight?",
    options: [
        { text: "The deck - take out the armed watch", goto: 369 },
        { text: "The galley - the cook might be alone", goto: 370 },
        { text: "Wait until they tire themselves out", goto: 371 }
    ]
},

226: {
    text: "You defeat the entire crew! The Demeter is now a ghost ship, carrying only you and your coffins. With no one to sail it, the ship drifts.",
    effect: { hunger: -8, crewAlive: 0 },
    options: [
        { text: "Try to learn navigation", goto: 372 },
        { text: "Wait for land to be sighted", goto: 373 },
        { text: "Abandon ship when you see land", goto: 374 }
    ]
},

227: {
    text: "The crew is panicking and disorganized. This is the perfect time to attack.",
    enemy: "panicked_crew",
    afterCombat: 375,
    goto: "combat"
},

228: {
    text: "You let the panic spread. Sailors accuse each other of being the monster. Fights break out. Some are thrown overboard. The crew thins itself without your intervention.",
    effect: { crewAlive: -3, suspicion: -2 },
    goto: 376
},

229: {
    text: "You find the most frightened sailor - a young man named Mikhail. He's hiding in a storage locker, praying. You dominate his mind easily.",
    effect: { suspicion: -1 },
    options: [
        { text: "Use him as your puppet among the crew", goto: 377 },
        { text: "Feed on him", goto: 378 }
    ]
},

230: {
    text: "You defeat the sleeping crew. The ship is now silent except for the creaking of wood and the sea. You've fed well, but now there's no one to sail the ship to England.",
    effect: { hunger: -6, crewAlive: 0 },
    goto: 379
},

231: {
    text: "The crew fights the fire for hours. They're exhausted and distracted. You slip back to your coffin unnoticed. The search is forgotten.",
    effect: { days: 1 },
    goto: 380
},

232: {
    text: "At dawn, when the crew tries to adjust the sails, the rigging collapses. Sails tear and ropes whip through the air. A sailor is injured. Chaos ensues, delaying any search for days.",
    effect: { suspicion: -2, days: 2 },
    goto: 381
},

233: {
    text: "In the morning, the captain discovers his log missing. It's found in a sailor's bunk. The accused sailor denies everything. The crew is divided, and trust breaks down.",
    effect: { suspicion: -3, days: 1 },
    goto: 382
},

234: {
    text: "You've set deadly traps around your coffins. Anyone who searches this area will pay dearly. You hide nearby to watch.",
    options: [
        { text: "Wait in ambush", goto: 383 },
        { text: "Leave and let the traps do their work", goto: 384 }
    ]
},

235: {
    text: "You wait in ambush near your coffins. Hours pass. Then you hear footsteps approaching. It's a search party of three sailors, led by the first mate. They're armed and nervous.",
    options: [
        { text: "Attack immediately", enemy: "search_party", afterCombat: 385, goto: "combat" },
        { text: "Let them trigger your traps first", goto: 386 },
        { text: "Use domination to turn them against each other", skill: "domination", difficulty: 12, success: 387, failure: 388 }
    ]
},

236: {
    text: "You set additional traps - more tripwires, falling cargo, and sharpened stakes. Your coffin area is now a death trap.",
    effect: { stamina: -1 },
    goto: 389
},

237: {
    text: "You hide nearby but ready to flee if necessary. You won't risk a direct confrontation unless you have to.",
    goto: 390
},

238: {
    text: "Moving the coffins to the forecastle is difficult work. The forecastle is forward, near the bow. It's damp and noisy from the sea, but it's rarely visited by the crew.",
    effect: { stamina: -3 },
    goto: 391
},

239: {
    text: "You find an empty cargo area in the hold and move your coffins there, covering them with canvas. It's a good hiding place - the crew already searched this area.",
    effect: { stamina: -2 },
    goto: 392
},

240: {
    text: "Moving your coffins to the captain's cabin is extremely risky, but brilliant in its audacity. Who would think to look for monsters in the captain's own quarters?",
    skill: "stealth",
    difficulty: 14,
    success: { 
        text: "You successfully move your coffins to the captain's cabin without being detected. The captain is away on deck.", 
        goto: 393 
    },
    failure: { 
        text: "You're caught moving a coffin! The captain sees you!", 
        enemy: "captain",
        afterCombat: 394,
        goto: "combat"
    }
},

241: {
    text: "You return to your coffin as dawn approaches. The cook will wake weak and confused. He'll report feeling ill, adding to the crew's growing list of mysteries.",
    effect: { days: 1 },
    goto: 395
},

242: {
    text: "You take the knives, meat tenderizer, and bottle of alcohol. These could be useful for weapons or creating diversions. You slip back to the hold.",
    addItem: "improvised_weapons",
    goto: 396
},

243: {
    text: "You use the alcohol to start a fire in the galley. Flames quickly spread. 'Fire! Fire in the galley!' shouts a crew member. The ship erupts in chaos.",
    effect: { suspicion: 5 },
    options: [
        { text: "Attack crew members fighting the fire", goto: 397 },
        { text: "Escape in the confusion", goto: 398 }
    ]
},

244: {
    text: "You poison the food supplies with strange herbs and powders. The crew will become sick tomorrow, weakening them and creating more confusion.",
    effect: { suspicion: 2 },
    addItem: "poison_herbs",
    goto: 399
},

245: {
    text: "You return to your coffin. Tomorrow, the crew will eat the poisoned food and become violently ill. They'll be weak and easy prey tomorrow night.",
    effect: { days: 1 },
    goto: 400
},

246: {
    text: "You return to the hold with your new weapons. They're crude but could be useful in a fight. Dawn approaches, so you settle into your coffin.",
    effect: { days: 1 },
    goto: 401
},

247: {
    text: "You escape in the confusion as the crew fights the fire. They're too busy to notice you. You return to your coffin safely.",
    effect: { days: 1 },
    goto: 402
},

248: {
    text: "You attack crew members who are fighting the fire. They're distracted and vulnerable.",
    enemy: "distracted_crew",
    afterCombat: 403,
    goto: "combat"
},

249: {
    text: "You sleep through the day. When night falls, you awaken to find the crew exhausted from fighting the galley fire. They're tired and less vigilant.",
    effect: { suspicion: 3, days: 1 },
    goto: 404
},

250: {
    text: "You return to your coffin. In the morning, Alexei reports feeling weak and having nightmares. The crew grows more suspicious but doesn't know what to believe.",
    effect: { days: 1 },
    goto: 405
},

251: {
    text: "You leave the crew quarters. Two sailors are now weak and pale. The crew will notice their condition in the morning, increasing suspicion.",
    effect: { suspicion: 3 },
    goto: 406
},

252: {
    text: "Attempting to feed on a third sailor is extremely risky. The other sailors are stirring in their sleep. One wrong move could wake them all.",
    skill: "stealth",
    difficulty: 15,
    success: { 
        text: "You manage to feed on a third sailor without waking anyone. You're finally sated.", 
        effect: { hunger: -3 },
        goto: 407 
    },
    failure: { 
        text: "The sailor wakes up and screams! All the sailors awaken!", 
        enemy: "entire_crew_quarters",
        afterCombat: 408,
        goto: "combat"
    }
},

253: {
    text: "You take the small knife. It's not much, but it could be useful. You leave the crew quarters and return to the hold.",
    addItem: "small_knife",
    goto: 409
},

254: {
    text: "You destroy the Bible, tearing its pages and throwing them overboard. The destruction of the holy book gives you a dark satisfaction.",
    effect: { stamina: 2 },
    goto: 410
},

255: {
    text: "You take the pocket watch as a trophy. It's silver and engraved with initials. You admire it briefly before returning to the hold.",
    addItem: "silver_watch",
    goto: 411
},

256: {
    text: "You return to your coffin. In the morning, the young sailor is found dead. The crew is terrified. Some begin praying constantly. The captain orders all crew to carry crosses.",
    effect: { suspicion: 5, days: 1 },
    goto: 412
},

257: {
    text: "You leave the crew quarters. All the sailors will wake exhausted from nightmares. They'll be less effective at their duties, slowing the ship's progress.",
    effect: { suspicion: 1 },
    goto: 413
},

258: {
    text: "After defeating the awakened sailors, the crew quarters are a bloody mess. The noise has alerted the entire ship. You must act quickly.",
    effect: { hunger: -4, suspicion: 7 },
    options: [
        { text: "Fight your way out", enemy: "alerted_crew", afterCombat: 414, goto: "combat" },
        { text: "Hide among the bodies", skill: "stealth", difficulty: 12, success: 415, failure: 416 },
        { text: "Set the room on fire to cover your escape", goto: 417 }
    ]
},

259: {
    text: "You take the loaded pistol. Two shots could save your life in a tight situation. You return to the hold carefully.",
    addItem: "loaded_pistol",
    goto: 418
},

260: {
    text: "You destroy the silver cross, feeling its holy power diminish as it melts. You return to the hold feeling stronger.",
    effect: { stamina: 2 },
    goto: 419
},

261: {
    text: "You return to your coffin. Trinkets mean nothing to an immortal. You need blood, and you'll get it tomorrow night. You sleep through the day.",
    effect: { days: 1 },
    goto: 420
},

262: {
    text: "The deck is cold and windy. Two crew members are on watch, armed and nervous. They're jumping at every shadow. How will you approach?",
    options: [
        { text: "Attack from above as a bat", skill: "shapeshift", difficulty: 8, success: 421, failure: 422 },
        { text: "Create a diversion to separate them", goto: 423 },
        { text: "Use domination to control one", skill: "domination", difficulty: 9, success: 424, failure: 425 }
    ]
},

263: {
    text: "The crew quarters are quiet. Most sailors are asleep, though some sleep fitfully after recent events. How many will you attack?",
    options: [
        { text: "Attack just one sailor", goto: 426 },
        { text: "Attack two sailors", goto: 427 },
        { text: "Poison their water supply", goto: 428 }
    ]
},

264: {
    text: "The galley is empty. The cook is sleeping in his nearby bunk. You could attack him, or search for supplies to poison the crew's food.",
    options: [
        { text: "Attack the sleeping cook", goto: 429 },
        { text: "Poison tomorrow's breakfast", goto: 430 },
        { text: "Set a fire to create chaos", goto: 431 }
    ]
},

265: {
    text: "You defeat the terrified crew. The ship is now completely yours. But with no one to sail it, you're adrift.",
    effect: { hunger: -6, crewAlive: 0 },
    options: [
        { text: "Try to steer the ship yourself", goto: 432 },
        { text: "Wait for another ship", goto: 433 },
        { text: "Abandon ship when land is sighted", goto: 434 }
    ]
},

266: {
    text: "You decide to let a few crew members survive to sail the ship. You'll dominate them to ensure they serve you. How many will you spare?",
    options: [
        { text: "Spare two sailors", goto: 435 },
        { text: "Spare three sailors", goto: 436 },
        { text: "Spare the first mate only", goto: 437 }
    ]
},

267: {
    text: "You learn enough navigation to steer the ship toward England. It's difficult work, and you can only do it at night, but you make progress. After several nights of sailing, you see land on the horizon!",
    effect: { days: 3 },
    goto: 438
},

268: {
    text: "The navigation charts make no sense to you. The ship drifts aimlessly for days. Your coffin earth begins to run out. Without it, you weaken.",
    effect: { earth: -1, days: 3 },
    options: [
        { text: "Search for more earth in your coffins", goto: 439 },
        { text: "Hope the ship drifts to land", goto: 440 },
        { text: "Try navigation again", skill: "intelligence", difficulty: 15, success: 441, failure: 442 }
    ]
},

269: {
    text: "With the first mate under your control, the ship continues toward England. The crew obeys him, unaware he serves you. You can feed on crew members occasionally without raising suspicion, as the first mate covers for you.",
    effect: { suspicion: 0 },
    goto: 443
},

270: {
    text: "After defeating the first mate, you're wounded but alive. The crew is now completely leaderless. The ship drifts as sailors argue about what to do.",
    effect: { suspicion: 6 },
    goto: 444
},

271: {
    text: "The crew quarters hold sleeping sailors - easy prey for a wounded vampire. You enter quietly. Which sailor will you feed on?",
    options: [
        { text: "The youngest sailor - easiest to overpower", goto: 445 },
        { text: "The oldest sailor - most blood", goto: 446 },
        { text: "Feed on multiple sailors to heal completely", goto: 447 }
    ]
},

272: {
    text: "You rest in your coffin for a full day and night. The earth heals your wounds, but your hunger grows intense. When you awaken, you're healed but ravenous.",
    effect: { hunger: 3, days: 2 },
    goto: 448
},

273: {
    text: "You defeat the armed first mate, but not before he fires his pistol. The shot echoes through the ship, alerting everyone.",
    effect: { hunger: -3, suspicion: 8 },
    crewEffect: { first_mate: false },
    options: [
        { text: "Fight the alerted crew", enemy: "entire_crew", afterCombat: 449, goto: "combat" },
        { text: "Flee to your coffin", goto: 450 },
        { text: "Hide on deck", skill: "stealth", difficulty: 11, success: 451, failure: 452 }
    ]
},

274: {
    text: "With the captain dead, the crew panics. The first mate tries to take command, but he lacks the captain's authority. The ship drifts as arguments break out.",
    effect: { suspicion: 6 },
    goto: 453
},

275: {
    text: "With the captain under your control, you have complete command of the ship. The crew follows his orders without question. You can feed when you wish, and the captain makes excuses for missing sailors.",
    effect: { suspicion: 0 },
    goto: 454
},

276: {
    text: "You defeat the captain, but the pistol shot alerted the entire ship. Crew members come running to the captain's cabin.",
    effect: { hunger: -4 },
    crewEffect: { captain: false },
    options: [
        { text: "Fight the arriving crew", enemy: "alerted_crew", afterCombat: 455, goto: "combat" },
        { text: "Escape through the window", goto: 456 },
        { text: "Hide in the cabin", goto: 457 }
    ]
},

277: {
    text: "You feed on the captain without killing him. He'll wake weak and confused, his leadership compromised. The ship will continue to England, but under weakened command.",
    effect: { suspicion: 3 },
    goto: 458
},

278: {
    text: "You sleep through the day. When night falls, you learn the crew discovered the cook missing. They assume he fell overboard. The captain orders safety lines for anyone on deck. Suspicion is moderate.",
    effect: { days: 1 },
    goto: 459
},

279: {
    text: "You sleep through the day. In the morning, the crew finds the bloody galley. Panic spreads. Two sailors try to abandon ship in the lifeboat. The captain struggles to maintain order.",
    effect: { suspicion: 7, days: 1 },
    goto: 460
},

280: {
    text: "You sleep through the day. In the morning, the crew finds the cook's body staged as an accident. Some believe it, others are suspicious. The crew is divided.",
    effect: { suspicion: 4, days: 1 },
    goto: 461
},

281: {
    text: "You sleep through the day. In the morning, the crew finds the bloody galley. Terror consumes the ship. Three sailors are found to have jumped overboard during the night. The remaining crew is on the brink of mutiny.",
    effect: { suspicion: 9, crewAlive: -3, days: 1 },
    goto: 462
},

282: {
    text: "Night falls on a sick ship. Most of the crew are weak from food poisoning. They're easy prey. Where will you hunt?",
    options: [
        { text: "The crew quarters - they're too sick to resist", goto: 463 },
        { text: "The deck - the watch is weakened", goto: 464 },
        { text: "The captain's cabin - he's sick but still dangerous", goto: 465 }
    ]
},

283: {
    text: "Night falls on a divided crew. Factions have formed, and trust is gone. They're more suspicious of each other than of any outside threat. This is perfect for you.",
    options: [
        { text: "Attack one faction", goto: 466 },
        { text: "Attack both factions and let them blame each other", goto: 467 },
        { text: "Wait and let them weaken each other", goto: 468 }
    ]
},

284: {
    text: "With no crew left, you must learn navigation yourself. You study the charts and instruments in the captain's cabin. After several days, you manage to set a course toward England.",
    skill: "intelligence",
    difficulty: 16,
    success: { 
        text: "You successfully navigate toward England. After a week, you sight land!", 
        goto: 469 
    },
    failure: { 
        text: "You fail to understand navigation. The ship drifts aimlessly.", 
        goto: 470 
    }
},

285: {
    text: "You wait for another ship to come near. Days pass. Your coffin earth begins to run low. Finally, after a week, you see a ship on the horizon.",
    effect: { earth: -1, days: 7 },
    options: [
        { text: "Signal the other ship", goto: 471 },
        { text: "Wait for them to come closer", goto: 472 },
        { text: "Abandon the Demeter and swim to the other ship", goto: 473 }
    ]
},

286: {
    text: "You wait for land to be sighted. Days turn into weeks. Your coffin earth runs low. You grow weak. Finally, after a month, you see land in the distance.",
    effect: { earth: -2, days: 30 },
    options: [
        { text: "Abandon ship and swim to shore", goto: 474 },
        { text: "Try to steer the ship to land", goto: 475 },
        { text: "Wait for the ship to drift closer", goto: 476 }
    ]
},

287: {
    text: "The Demeter is now a true ghost ship. You're alone with your coffins and the corpses of the crew. The ship drifts with no one at the helm. What will you do?",
    options: [
        { text: "Try to learn navigation", goto: 477 },
        { text: "Wait for land to be sighted", goto: 478 },
        { text: "Prepare to abandon ship", goto: 479 }
    ]
},

288: {
    text: "The Demeter drifts with no living souls except you. The corpses of the crew begin to rot. The stench is terrible. You must decide what to do.",
    options: [
        { text: "Throw the bodies overboard", goto: 480 },
        { text: "Leave the bodies and focus on navigation", goto: 481 },
        { text: "Use the bodies to create a diversion if another ship approaches", goto: 482 }
    ]
},

289: {
    text: "You've fed deeply on the last crew members. The ship is now completely yours. But with no one to sail it, you're adrift. The hunger is sated for now, but you need to reach England.",
    effect: { hunger: -10 },
    options: [
        { text: "Study navigation", goto: 483 },
        { text: "Wait for the ship to drift to land", goto: 484 },
        { text: "Abandon ship when you see land", goto: 485 }
    ]
},

290: {
    text: "You have complete control of the Demeter. The dominated crew sails the ship efficiently toward England. You can feed on them occasionally without killing them, keeping them alive to serve you. The voyage continues smoothly.",
    effect: { suspicion: 0 },
    goto: 486
},

291: {
    text: "The Demeter is now a ghost ship. You're alone with your coffins, sailing toward England with no crew. The ship drifts, but the prevailing currents carry it westward. After several days, you see land!",
    effect: { days: 5 },
    goto: 487
},

292: {
    text: "Night falls on a relieved ship. The crew believes the worst is over. They let their guard down slightly. This is your opportunity.",
    options: [
        { text: "Attack while they're complacent", goto: 488 },
        { text: "Wait another night to lull them further", goto: 489 },
        { text: "Create new 'evidence' to renew their fear", goto: 490 }
    ]
},

293: {
    text: "Despite your burns, you defeat the sailor. But sunlight continues to stream into the hold through the open coffin. You're burning alive!",
    effect: { stamina: -5 },
    options: [
        { text: "Close the coffin and hide", goto: 491 },
        { text: "Flee to a darker part of the ship", goto: 492 },
        { text: "Attack the other crew members coming to investigate", enemy: "multiple_crew", afterCombat: 493, goto: "combat" }
    ]
},

294: {
    text: "You hold the coffin lid closed as the sailor tries to open it. After several minutes, he gives up. 'Must have been stuck,' he mutters. You're safe, but badly burned.",
    effect: { stamina: -3 },
    goto: 494
},

295: {
    text: "You burst out of the coffin despite the sunlight! The burning is agonizing, but you attack the sailor before he can call for help.",
    effect: { stamina: -6 },
    enemy: "surprised_sailor",
    afterCombat: 495,
    goto: "combat"
},

296: {
    text: "Sunlight continues to burn you as you fight the crew members who come to investigate.",
    enemy: "multiple_crew",
    afterCombat: 496,
    goto: "combat"
},

297: {
    text: "You defeat the search party. But the noise has alerted the rest of the crew. They're coming to investigate.",
    effect: { hunger: -3, suspicion: 8 },
    options: [
        { text: "Prepare to fight the entire crew", enemy: "entire_crew", afterCombat: 497, goto: "combat" },
        { text: "Hide the bodies and pretend nothing happened", skill: "stealth", difficulty: 14, success: 498, failure: 499 },
        { text: "Set the hold on fire to cover your escape", goto: 500 }
    ]
},

298: {
    text: "You hide in the forecastle all day. The crew searches the ship but doesn't think to look here. Night falls, and you emerge to find the crew exhausted from searching. They're less vigilant now.",
    effect: { suspicion: -1 },
    goto: 501
},

299: {
    text: "You defeat the crew in their final stand. The Demeter is yours. But the fight was hard, and you're wounded. The ship drifts with no one to sail it.",
    effect: { hunger: -5, crewAlive: 0 },
    goto: 502
},

300: {
    text: "After two days of constant vigilance, the crew begins to tire. Their watches become sloppy. Some fall asleep at their posts. This is your chance.",
    options: [
        { text: "Attack the sleeping watch", goto: 503 },
        { text: "Attack the crew quarters", goto: 504 },
        { text: "Poison their food while they're distracted", goto: 505 }
    ]
},

301: {
    text: "Your efforts to divide the crew succeed brilliantly. They turn on each other, accusing companions of being the monster. Fights break out. Two sailors are killed by their own crewmates.",
    effect: { crewAlive: -2, suspicion: -4 },
    goto: 506
},

302: {
    text: "The crew returns to their duties, though nerves are frayed. They jump at shadows and speak in whispers. Night falls. Where will you hunt?",
    options: [
        { text: "The deck - they're less vigilant now", goto: 507 },
        { text: "The galley - the cook is preparing night rations", goto: 508 },
        { text: "The captain's cabin - he's writing in his log", goto: 509 }
    ]
},

303: {
    text: "You move to another sailor. This one is sleeping lightly. As you approach, his eyes flutter open!",
    skill: "stealth",
    difficulty: 12,
    success: { 
        text: "You're upon him before he can scream. Your hand covers his mouth.", 
        effect: { hunger: -3 },
        goto: 510 
    },
    failure: { 
        text: "He wakes up and screams! All the sailors awaken!", 
        enemy: "entire_crew_quarters",
        afterCombat: 511,
        goto: "combat"
    }
},

304: {
    text: "You leave the crew quarters before anyone else wakes. One sailor is dead, another weak. The crew will find them in the morning.",
    effect: { suspicion: 4 },
    goto: 512
},

305: {
    text: "You leave the crew quarters. All the sailors will wake exhausted from nightmares. They'll be ineffective at their duties today, slowing the ship's progress.",
    effect: { suspicion: 2 },
    goto: 513
},

306: {
    text: "The resistant sailor fights your domination and wakes up screaming! He alerts the entire crew quarters!",
    enemy: "resistant_sailors",
    afterCombat: 514,
    goto: "combat"
},

307: {
    text: "You attack the fleeing crew in the corridor. They're panicked and disorganized, easy prey.",
    effect: { hunger: -5 },
    options: [
        { text: "Continue attacking the rest of the crew", enemy: "remaining_crew", afterCombat: 515, goto: "combat" },
        { text: "Escape in the chaos", goto: 516 },
        { text: "Let the fire spread to create more chaos", goto: 517 }
    ]
},

308: {
    text: "You silence the lookout before he can scream. You feed quickly, then drop his body overboard. No one saw or heard anything.",
    effect: { hunger: -3 },
    crewEffect: { lookout: false },
    goto: 518
},

309: {
    text: "The lookout fights bravely in the confined space of the crow's nest.",
    enemy: "lookout",
    afterCombat: 519,
    goto: "combat"
},

310: {
    text: "You follow the lookout to the galley. He's making coffee, his back to you. This is the perfect opportunity.",
    options: [
        { text: "Attack him in the galley", goto: 520 },
        { text: "Wait until he returns to the crow's nest", goto: 521 },
        { text: "Poison his coffee", goto: 522 }
    ]
},

311: {
    text: "The lookout climbs down to investigate the noise. He goes to the port railing and looks over. His back is to you.",
    options: [
        { text: "Push him overboard", goto: 523 },
        { text: "Attack him from behind", goto: 524 },
        { text: "Let him investigate and return to his post", goto: 525 }
    ]
},

312: {
    text: "You feed on the sleeping cook without killing him. He'll wake weak and pale, adding to the crew's medical mysteries.",
    effect: { hunger: -3, suspicion: 1 },
    goto: 526
},

313: {
    text: "You kill the cook. His body lies in his bunk. The crew will find it in the morning.",
    effect: { suspicion: 4 },
    crewEffect: { cook: false },
    goto: 527
},

314: {
    text: "You take the matches and rum. These could be useful for starting fires or creating diversions. You leave the galley quietly.",
    addItem: "matches_rum",
    goto: 528
},

315: {
    text: "You poison the food supplies with strange powders from the cook's spice rack. The crew will become sick tomorrow.",
    effect: { suspicion: 2 },
    goto: 529
},

316: {
    text: "You set a fire trap in the galley. When the cook lights the stove in the morning, it will cause a small explosion and fire.",
    goto: 530
},

317: {
    text: "You set your trap and leave the galley. In the morning, when the cook lights the stove, there will be chaos. You return to your coffin.",
    effect: { days: 1 },
    goto: 531
},

318: {
    text: "Night falls on a ship mourning a lost comrade. The crew is somber but determined. They carry weapons and watch each other's backs. Hunting will be difficult tonight.",
    options: [
        { text: "Attack anyway - they can't stay vigilant forever", goto: 532 },
        { text: "Wait another night", goto: 533 },
        { text: "Create a diversion to break their concentration", goto: 534 }
    ]
},

319: {
    text: "The crew is on high alert. Life lines are required for anyone on deck. Weapons are distributed. The ship feels like a fortress. How will you hunt tonight?",
    options: [
        { text: "Attack the most isolated crew member", goto: 535 },
        { text: "Use shapeshifting to bypass their defenses", skill: "shapeshift", difficulty: 10, success: 536, failure: 537 },
        { text: "Poison their water supply", goto: 538 }
    ]
},

320: {
    text: "While the crew fights among themselves, you attack from the shadows. They're too busy fighting each other to notice you until it's too late.",
    enemy: "distracted_crew",
    afterCombat: 539,
    goto: "combat"
},

321: {
    text: "You defeat the sailors trying to abandon ship. Their bodies lie by the lifeboat. The captain and remaining crew come running at the noise.",
    effect: { suspicion: 8 },
    options: [
        { text: "Fight the arriving crew", enemy: "remaining_crew", afterCombat: 540, goto: "combat" },
        { text: "Hide and let them discover the bodies", goto: 541 },
        { text: "Throw the bodies overboard and hide", goto: 542 }
    ]
},

322: {
    text: "With the captain under your control, order is restored. The crew calms down and returns to their duties. The voyage continues under your secret command.",
    effect: { suspicion: -4 },
    goto: 543
},

323: {
    text: "The entire crew attacks you! It's a desperate battle for control of the ship.",
    enemy: "entire_crew",
    afterCombat: 544,
    goto: "combat"
},

324: {
    text: "You defeat the night watch. But their absence will be noticed at shift change. You have a few hours before the ship is alerted.",
    effect: { hunger: -3 },
    options: [
        { text: "Attack the sleeping crew before they're alerted", goto: 545 },
        { text: "Hide the bodies and pretend nothing happened", goto: 546 },
        { text: "Set a fire to create a diversion", goto: 547 }
    ]
},

325: {
    text: "The crew searches the hold but finds nothing. They're confused and frustrated. 'Maybe we're all going mad,' one says. Their suspicion decreases slightly. Another night falls.",
    effect: { suspicion: -2, days: 1 },
    goto: 548
},
            
            "gameover": {
                text: "Your voyage has ended. The Demeter claims another victim.",
                ending: true,
                options: [
                    { text: "Try Again", goto: "restart" },
                    { text: "Main Menu", goto: "start" }
                ]
            },
            
            "victory": {
                text: "You have survived the voyage! England lies before you, ripe for conquest.",
                ending: true,
                options: [
                    { text: "Sail Again", goto: "restart" },
                    { text: "Main Menu", goto: "start" }
                ]
            }
        };
        
        // Enemies for Dracula's Rise
        const enemies = {
            armed_sailor: {
                name: "Armed Sailor",
                skill: 7,
                stamina: 8,
                attack: "Sailor's knife",
                damage: 2,
                weakness: "Surprise attacks",
                loot: ["sailor_knife", 2],
                description: "A seasoned sailor armed with a sharp knife."
            },
            cook: {
                name: "Cook Petrov",
                skill: 6,
                stamina: 10,
                attack: "Meat cleaver",
                damage: 3,
                weakness: "Slow and overweight",
                loot: ["meat_cleaver", 5],
                description: "The ship's cook, strong from years of kitchen work."
            },
            first_mate: {
                name: "First Mate Ivan",
                skill: 9,
                stamina: 12,
                attack: "Officer's saber",
                damage: 3,
                weakness: "Overconfident",
                loot: ["officer_saber", 10],
                description: "The ship's first officer, trained in combat."
            },
            alerted_crew: {
                name: "Alerted Crew",
                skill: 8,
                stamina: 15,
                attack: "Various weapons",
                damage: 3,
                weakness: "Poor coordination",
                loot: ["mixed_weapons", 8],
                description: "Three crew members searching for you."
            },
            crew_search_party: {
                name: "Crew Search Party",
                skill: 7,
                stamina: 18,
                attack: "Lanterns and tools",
                damage: 2,
                weakness: "Fearful",
                loot: ["crew_tools", 6],
                description: "A group of terrified but determined sailors."
            },
            desperate_crew: {
                name: "Desperate Crew",
                skill: 8,
                stamina: 20,
                attack: "Makeshift weapons",
                damage: 4,
                weakness: "Trapped",
                loot: ["last_resources", 15],
                description: "The last survivors, fighting for their lives."
            },
            entire_crew: {
                name: "Entire Crew",
                skill: 9,
                stamina: 30,
                attack: "Overwhelming numbers",
                damage: 5,
                weakness: "Panic and confusion",
                loot: ["ship_loot", 25],
                description: "All remaining crew members attacking together."
            },
            sleeping_crew: {
                name: "Sleeping Crew",
                skill: 5,
                stamina: 12,
                attack: "Half-asleep defense",
                damage: 1,
                weakness: "Surprised and sleepy",
                loot: ["personal_items", 10],
                description: "Crew members attacked in their sleep."
            },
            alert_sailor: {
                name: "Alert Sailor",
                skill: 7,
                stamina: 9,
                attack: "Ready knife",
                damage: 2,
                weakness: "Alone",
                loot: ["sailor_gear", 3],
                description: "A sailor ready for trouble."
            },
            lookout: {
                name: "Lookout Yuri",
                skill: 8,
                stamina: 10,
                attack: "Sharp eyes and whistle",
                damage: 2,
                weakness: "Isolated position",
                loot: ["spyglass", 8],
                description: "The ship's lookout, vigilant but alone."
            }
        };
        
        // Items for Dracula's Rise
        const items = {
            crew_knowledge: {
                name: "Crew Knowledge",
                type: "special",
                description: "You know the crew's schedules and routines.",
                value: 0
            },
            hidden_cache: {
                name: "Hidden Earth Cache",
                type: "earth",
                description: "Extra coffin earth for emergencies.",
                effect: { earth: 2 },
                value: 10
            },
            rat_swarm: {
                name: "Rat Swarm",
                type: "special",
                description: "You can summon rats to create diversions.",
                value: 5
            },
            captains_log: {
                name: "Captain's Log",
                type: "special",
                description: "The captain's journal detailing crew suspicions.",
                value: 5
            },
            poisoned_food: {
                name: "Poisoned Food",
                type: "special",
                description: "Food tainted with vampiric essence.",
                value: 3
            },
            sailor_knife: {
                name: "Sailor's Knife",
                type: "weapon",
                description: "A sharp sailor's knife. +1 combat bonus.",
                bonus: { combat: 1 },
                value: 2
            },
            meat_cleaver: {
                name: "Meat Cleaver",
                type: "weapon",
                description: "Heavy kitchen cleaver. +2 combat bonus.",
                bonus: { combat: 2 },
                value: 5
            },
            officer_saber: {
                name: "Officer's Saber",
                type: "weapon",
                description: "A naval officer's sword. +3 combat bonus.",
                bonus: { combat: 3 },
                value: 15
            },
            mixed_weapons: {
                name: "Mixed Weapons",
                type: "special",
                description: "Various crew weapons.",
                value: 8
            },
            crew_tools: {
                name: "Crew Tools",
                type: "special",
                description: "Tools that could be used as weapons.",
                value: 6
            },
            last_resources: {
                name: "Last Resources",
                type: "special",
                description: "Final supplies from desperate crew.",
                value: 15
            },
            ship_loot: {
                name: "Ship's Loot",
                type: "special",
                description: "Valuable items from the entire ship.",
                value: 25
            },
            personal_items: {
                name: "Personal Items",
                type: "special",
                description: "Crew members' personal belongings.",
                value: 10
            },
            sailor_gear: {
                name: "Sailor's Gear",
                type: "special",
                description: "A sailor's personal equipment.",
                value: 3
            },
            spyglass: {
                name: "Spyglass",
                type: "special",
                description: "A brass spyglass from the lookout.",
                value: 8
            },
            coffin_earth: {
                name: "Coffin Earth",
                type: "earth",
                description: "Sacred earth from your homeland.",
                effect: { stamina: 2 },
                value: 5
            }
        };
        
        // Initialize Game
        function initGame() {
            document.getElementById('start-btn').addEventListener('click', showCharacterScreen);
            document.getElementById('rules-btn').addEventListener('click', showRulesScreen);
            document.getElementById('begin-btn').addEventListener('click', startGame);
            
            // Initialize character creation buttons
            document.getElementById('stealth-plus').addEventListener('click', function() { changeStat('stealth', 1); });
            document.getElementById('stealth-minus').addEventListener('click', function() { changeStat('stealth', -1); });
            document.getElementById('domination-plus').addEventListener('click', function() { changeStat('domination', 1); });
            document.getElementById('domination-minus').addEventListener('click', function() { changeStat('domination', -1); });
            document.getElementById('shapeshift-plus').addEventListener('click', function() { changeStat('shapeshift', 1); });
            document.getElementById('shapeshift-minus').addEventListener('click', function() { changeStat('shapeshift', -1); });
            
            updatePointsDisplay();
            console.log("Dracula's Rise initialized");
        }
        
        // Show Screens (same functions as before with updated IDs)
        function showStartScreen() {
            hideAllScreens();
            document.getElementById('start-screen').classList.add('active');
            gameState.screen = 'start';
        }
        
        function showRulesScreen() {
            hideAllScreens();
            document.getElementById('rules-screen').classList.add('active');
            gameState.screen = 'rules';
        }
        
        function showCharacterScreen() {
            hideAllScreens();
            document.getElementById('character-screen').classList.add('active');
            gameState.screen = 'character';
            resetCharacterScreen();
        }
        
        function showGameScreen() {
            hideAllScreens();
            document.getElementById('game-screen').classList.add('active');
            gameState.screen = 'game';
            displaySection(gameState.currentSection);
        }
        
        function showInventory() {
            hideAllScreens();
            document.getElementById('inventory-screen').classList.add('active');
            gameState.screen = 'inventory';
            displayInventory();
        }
        
        function showStats() {
            hideAllScreens();
            document.getElementById('stats-screen').classList.add('active');
            gameState.screen = 'stats';
            displayStats();
        }
        
        function showCombatScreen() {
            hideAllScreens();
            document.getElementById('combat-screen').classList.add('active');
            gameState.screen = 'combat';
            displayCombat();
        }
        
        function showDiceScreen() {
            hideAllScreens();
            document.getElementById('dice-screen').classList.add('active');
            gameState.screen = 'dice';
        }
        
        function showGameOver(message) {
            hideAllScreens();
            document.getElementById('gameover-screen').classList.add('active');
            gameState.screen = 'gameover';
            document.getElementById('gameover-text').innerHTML = message;
        }
        
        function showVictory(message) {
            hideAllScreens();
            document.getElementById('victory-screen').classList.add('active');
            gameState.screen = 'victory';
            document.getElementById('victory-text').innerHTML = message;
        }
        
        function hideAllScreens() {
            const screens = document.querySelectorAll('.screen');
            screens.forEach(screen => screen.classList.remove('active'));
        }
        
        // Character Creation Functions
        function rollDice(numDice, sides) {
            let total = 0;
            for (let i = 0; i < numDice; i++) {
                total += Math.floor(Math.random() * sides) + 1;
            }
            return total;
        }
        
        function rollStamina() {
            const roll = rollDice(2, 6) + 10; // Lower starting stamina for weakened Dracula
            gameState.stats.stamina = roll;
            gameState.stats.maxStamina = roll;
            document.getElementById('stamina-value').textContent = roll;
            updateBeginButtonState();
        }
        
        function rollSkill() {
            const roll = rollDice(1, 6) + 5; // Weakened from the voyage
            gameState.stats.skill = roll;
            document.getElementById('skill-value').textContent = roll;
            updateBeginButtonState();
        }
        
        function rollLuck() {
            const roll = rollDice(1, 6) + 5;
            gameState.stats.luck = roll;
            gameState.stats.initialLuck = roll;
            document.getElementById('luck-value').textContent = roll;
            updateBeginButtonState();
        }
        
        function changeStat(stat, change) {
            // Don't allow going below 3
            if (change < 0 && gameState.stats[stat] <= 3) {
                return;
            }
            
            // Don't allow going above 18
            if (change > 0 && gameState.stats[stat] >= 18) {
                return;
            }
            
            // Check if we have points to spend or can take back points
            if (change > 0 && gameState.stats.points <= 0) {
                return;
            }
            
            gameState.stats[stat] += change;
            gameState.stats.points -= change;
            
            document.getElementById(`${stat}-value`).textContent = gameState.stats[stat];
            updatePointsDisplay();
            updateBeginButtonState();
        }
        
        function updatePointsDisplay() {
            document.getElementById('points').textContent = gameState.stats.points;
        }
        
        function selectStartingItem(item) {
            gameState.selectedStartingItem = item;
            
            // Reset all button styles
            document.getElementById('crew-knowledge-btn').style.borderColor = '#666';
            document.getElementById('crew-knowledge-btn').style.color = '#fff';
            document.getElementById('hidden-cache-btn').style.borderColor = '#666';
            document.getElementById('hidden-cache-btn').style.color = '#fff';
            document.getElementById('rats-btn').style.borderColor = '#666';
            document.getElementById('rats-btn').style.color = '#fff';
            
            // Highlight selected button
            document.getElementById(`${item.replace('_', '-')}-btn`).style.borderColor = '#ff3333';
            document.getElementById(`${item.replace('_', '-')}-btn`).style.color = '#ff3333';
            
            updateBeginButtonState();
        }
        
        function updateBeginButtonState() {
            const beginBtn = document.getElementById('begin-btn');
            const isDisabled = (
                gameState.stats.stamina === 0 ||
                gameState.stats.skill === 0 ||
                gameState.stats.luck === 0 ||
                gameState.stats.points !== 0 ||
                gameState.selectedStartingItem === null
            );
            beginBtn.disabled = isDisabled;
        }
        
        // Start Game
        function startGame() {
            // Add starting item
            if (gameState.selectedStartingItem) {
                gameState.inventory.push(gameState.selectedStartingItem);
                
                // Apply effects
                if (gameState.selectedStartingItem === 'hidden_cache') {
                    gameState.earth += 2;
                }
            }
            
            // Update displays
            updateAllDisplays();
            
            // Start at section 1
            gameState.currentSection = 1;
            gameState.visitedSections = [1];
            
            // Show game screen
            showGameScreen();
        }
        
        // Update all displays
        function updateAllDisplays() {
            // Update stamina
            document.getElementById('current-stamina').textContent = gameState.stats.stamina;
            document.getElementById('max-stamina').textContent = gameState.stats.maxStamina;
            document.getElementById('stamina-fill').style.width = `${(gameState.stats.stamina / gameState.stats.maxStamina) * 100}%`;
            
            // Update hunger
            document.getElementById('current-hunger').textContent = gameState.hunger;
            document.getElementById('hunger-fill').style.width = `${gameState.hunger * 10}%`;
            
            // Update suspicion
            document.getElementById('current-suspicion').textContent = gameState.suspicion;
            document.getElementById('suspicion-fill').style.width = `${gameState.suspicion * 10}%`;
            
            // Update days
            document.getElementById('days').textContent = gameState.days;
            
            // Update inventory count
            document.getElementById('inventory-count').textContent = gameState.inventory.length;
        }
        
        // Display Gamebook Section
        function displaySection(sectionNumber) {
            const section = gamebook[sectionNumber];
            if (!section) {
                showGameOver(`<p class="game-over">VOYAGE ENDED</p><p>You've reached section ${sectionNumber}, which leads nowhere. Your journey ends in the void.</p>`);
                return;
            }
            
            // Mark as visited if not already
            if (!gameState.visitedSections.includes(sectionNumber)) {
                gameState.visitedSections.push(sectionNumber);
            }
            
            // Update current section
            gameState.currentSection = sectionNumber;
            
            // Display section text
            let html = `<p><span class="section-number">[${sectionNumber}]</span> ${section.text}</p>`;
            
            // Add any effects if this section has them
            if (section.effect) {
                applyEffect(section.effect);
                
                if (section.effect.hunger) {
                    const change = section.effect.hunger < 0 ? 'decreased' : 'increased';
                    const amount = Math.abs(section.effect.hunger);
                    html += `<p class="${section.effect.hunger < 0 ? 'outcome-good' : 'outcome-bad'}">Your BLOOD HUNGER ${change} by ${amount}.</p>`;
                }
                
                if (section.effect.suspicion) {
                    const change = section.effect.suspicion > 0 ? 'increased' : 'decreased';
                    const amount = Math.abs(section.effect.suspicion);
                    html += `<p class="${section.effect.suspicion > 0 ? 'outcome-bad' : 'outcome-good'}">CREW SUSPICION ${change} by ${amount}.</p>`;
                }
                
                if (section.effect.stamina) {
                    const change = section.effect.stamina > 0 ? 'restored' : 'lost';
                    html += `<p class="${section.effect.stamina > 0 ? 'outcome-good' : 'outcome-bad'}">You ${change} ${Math.abs(section.effect.stamina)} STAMINA.</p>`;
                }
                
                if (section.effect.days) {
                    gameState.days += section.effect.days;
                    html += `<p>${section.effect.days} day(s) pass.</p>`;
                }
                
                if (section.effect.earth) {
                    gameState.earth += section.effect.earth;
                    html += `<p class="outcome-good">You gained ${section.effect.earth} coffin earth.</p>`;
                }
            }
            
            // Handle crew effects
            if (section.crewEffect) {
                for (const crewMember in section.crewEffect) {
                    if (section.crewEffect[crewMember] === false) {
                        gameState.crew[crewMember].alive = false;
                        gameState.crewAlive--;
                        html += `<p class="outcome-bad">${gameState.crew[crewMember].name} is dead.</p>`;
                    }
                }
            }
            
            // Check for traps
            if (section.trap) {
                html = `<div class="trap">${html}</div>`;
            }
            
            // Check for puzzles
            if (section.puzzle) {
                html = `<div class="puzzle">${html}</div>`;
            }
            
            document.getElementById('game-text').innerHTML = html;
            updateAllDisplays();
            
            // Display options
            const buttonContainer = document.getElementById('action-buttons');
            buttonContainer.innerHTML = '';
            
            // If this is an ending, show ending options
            if (section.ending) {
                const restartButton = document.createElement('button');
                restartButton.textContent = "SAIL AGAIN";
                restartButton.onclick = restartGame;
                buttonContainer.appendChild(restartButton);
                
                const menuButton = document.createElement('button');
                menuButton.textContent = "MAIN MENU";
                menuButton.onclick = showStartScreen;
                buttonContainer.appendChild(menuButton);
                return;
            }
            
            // If section has a gameover flag
            if (section.gameOver) {
                showGameOver(`<p class="game-over">VOYAGE ENDED</p><p>${section.text}</p>`);
                return;
            }
            
            // If section has a victory flag
            if (section.victory) {
                showVictory(`<p class="victory">VOYAGE COMPLETE!</p><p>${section.text}</p>`);
                return;
            }
            
            // If section has options, show them
            if (section.options) {
                section.options.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.textContent = option.text;
                    
                    // Check if this is a skill test option
                    if (option.skill) {
                        button.className = 'skill-check';
                    }
                    
                    button.onclick = function() {
    if (option.skill) {
        // This is a skill test option
        testSkill(option.skill, option.difficulty, option.success, option.failure || option);
    } else if (option.goto === "combat") {
                            // Start combat
                            if (section.enemy) {
                                gameState.enemy = section.enemy;
                                gameState.afterCombatSection = section.afterCombat || 200;
                                startCombat();
                            }
                        } else if (option.testLuck) {
                            // Test luck
                            testLuck("Testing your luck...", option.lucky, option.unlucky);
                        } else {
                            // Normal navigation
                            goToSection(option.goto);
                        }
                    };
                    
                    buttonContainer.appendChild(button);
                });
            }
            
            // If section has a goto but no options, create a continue button
            if (section.goto && !section.options && !section.skill && !section.testLuck && !section.enemy) {
                const continueButton = document.createElement('button');
                continueButton.textContent = "CONTINUE";
                continueButton.className = 'continue-btn';
                continueButton.onclick = function() {
                    goToSection(section.goto);
                };
                buttonContainer.appendChild(continueButton);
            }
            
            // If section has enemy but no options, create a fight button
            if (section.enemy && !section.options) {
                const fightButton = document.createElement('button');
                fightButton.textContent = "FIGHT!";
                fightButton.className = 'combat-option';
                fightButton.onclick = function() {
                    gameState.enemy = section.enemy;
                    gameState.afterCombatSection = section.afterCombat || 200;
                    startCombat();
                };
                buttonContainer.appendChild(fightButton);
            }
        }
        
        // Apply effect to character
        function applyEffect(effect) {
            if (effect.stamina) {
                gameState.stats.stamina += effect.stamina;
                if (gameState.stats.stamina > gameState.stats.maxStamina) {
                    gameState.stats.stamina = gameState.stats.maxStamina;
                }
                if (gameState.stats.stamina <= 0) {
                    showGameOver("<p class='game-over'>VOYAGE ENDED</p><p>Your Stamina has reached zero. You perish in your coffin.</p>");
                    return;
                }
            }
            
            if (effect.hunger) {
                gameState.hunger += effect.hunger;
                if (gameState.hunger < 0) gameState.hunger = 0;
                if (gameState.hunger > 10) {
                    // Lose control - automatic attack
                    gameState.hunger = 10;
                    displaySection(37); // Lose control section
                    return;
                }
            }
            
            if (effect.suspicion) {
                gameState.suspicion += effect.suspicion;
                if (gameState.suspicion < 0) gameState.suspicion = 0;
                if (gameState.suspicion > 10) gameState.suspicion = 10;
            }
            
            updateAllDisplays();
        }
        
        // Go to a section
function goToSection(sectionNumber) {
    if (sectionNumber === "combat") {
        if (gameState.enemy) {
            startCombat();
        }
    } else if (sectionNumber === "restart") {
        restartGame();
    } else if (sectionNumber === "start") {
        showStartScreen();
    } else if (sectionNumber === "gameover") {
        showGameOver("<p class='game-over'>VOYAGE ENDED</p><p>Your journey ends here.</p>");
    } else if (sectionNumber === "victory") {
        showVictory("<p class='victory'>VOYAGE COMPLETE!</p><p>You've survived the Demeter!</p>");
    } else {
        // Update current section and show game screen
        gameState.currentSection = sectionNumber;
        showGameScreen();
    }
}
        
        // Test Skill
function testSkill(skill, difficulty, successSection, failureSection) {
    const skillValue = gameState.stats[skill];
    const roll = rollDice(2, 6);
    
    // Show dice roll screen
    showDiceScreen();
    
    document.getElementById('dice-reason').textContent = `Testing your ${skill.toUpperCase()} (${skillValue}) against difficulty ${difficulty}`;
    document.getElementById('dice-result').textContent = `You rolled ${roll}`;
    
    let outcomeText = "";
    let nextSection = null;
    let isSuccess = roll <= skillValue;
    
    if (isSuccess) {
        outcomeText = `Success! Your ${skill.toUpperCase()} prevails.`;
        nextSection = successSection;
    } else {
        outcomeText = `Failure! Your ${skill.toUpperCase()} is insufficient.`;
        nextSection = failureSection;
    }
    
    // Apply effects and get text from outcome if it's an object
    if (typeof nextSection === 'object') {
        if (nextSection.text) {
            outcomeText += ` ${nextSection.text}`;
        }
        if (nextSection.effect) {
            applyEffect(nextSection.effect);
        }
    }
    
    document.getElementById('dice-outcome').innerHTML = outcomeText;
    
    // Create continue button
    const optionsDiv = document.getElementById('dice-options');
    optionsDiv.innerHTML = '';
    
    const continueButton = document.createElement('button');
    continueButton.textContent = "CONTINUE";
    continueButton.className = 'continue-btn';
    continueButton.onclick = function() {
        // Determine where to go
        let destination;
        if (typeof nextSection === 'object') {
            // If it's an object, check for goto property
            destination = nextSection.goto || nextSection;
        } else {
            // If it's already a number or string, use it directly
            destination = nextSection;
        }
        
        // Handle combat if needed
        if (destination === "combat") {
            // Set up combat if the outcome object has enemy info
            if (typeof nextSection === 'object' && nextSection.enemy) {
                gameState.enemy = nextSection.enemy;
                gameState.afterCombatSection = nextSection.afterCombat || 200;
            }
            startCombat();
        } else {
            goToSection(destination);
        }
    };
    optionsDiv.appendChild(continueButton);
}
        
        // Test Luck
function testLuck(reason, lucky, unlucky) {
    // Reduce luck by 1 for testing it
    const currentLuck = gameState.stats.luck;
    gameState.stats.luck -= 1;
    if (gameState.stats.luck < 0) gameState.stats.luck = 0;
    updateAllDisplays();
    
    const roll = rollDice(2, 6);
    
    // Show dice roll screen
    showDiceScreen();
    
    document.getElementById('dice-reason').textContent = reason;
    document.getElementById('dice-result').textContent = `You rolled ${roll}. Your Luck is ${currentLuck}.`;
    
    let outcomeText = "";
    let nextSection = null;
    let isLucky = roll <= currentLuck;
    
    if (isLucky) {
        outcomeText = "You are Lucky!";
        if (lucky && lucky.text) {
            outcomeText += ` ${lucky.text}`;
        }
        if (lucky && lucky.effect) {
            applyEffect(lucky.effect);
        }
        nextSection = lucky.goto;
    } else {
        outcomeText = "You are Unlucky!";
        if (unlucky && unlucky.text) {
            outcomeText += ` ${unlucky.text}`;
        }
        if (unlucky && unlucky.effect) {
            applyEffect(unlucky.effect);
        }
        nextSection = unlucky.goto;
    }
    
    document.getElementById('dice-outcome').innerHTML = outcomeText;
    
    // Create continue button
    const optionsDiv = document.getElementById('dice-options');
    optionsDiv.innerHTML = '';
    
    const continueButton = document.createElement('button');
    continueButton.textContent = "CONTINUE";
    continueButton.className = 'continue-btn';
    continueButton.onclick = function() {
        if (nextSection === "combat") {
            if (gameState.enemy) {
                startCombat();
            }
        } else if (nextSection === "gameover") {
            showGameOver("<p class='game-over'>VOYAGE ENDED</p><p>Bad luck ends your journey.</p>");
        } else {
            goToSection(nextSection);
        }
    };
    optionsDiv.appendChild(continueButton);
}
        
        // Combat Functions (same as original but with ship-themed adjustments)
        function startCombat() {
            gameState.inCombat = true;
            gameState.combatRound = 0;
            gameState.enemyData = { ...enemies[gameState.enemy] };
            showCombatScreen();
        }
        
        function displayCombat() {
            const enemy = gameState.enemyData;
            
            // Set enemy name and sprite
            document.getElementById('enemy-name').textContent = enemy.name.toUpperCase();
            
            // Set enemy sprite based on enemy type
            let sprite = "âš“";
            if (gameState.enemy.includes("cook")) sprite = "ðŸ‘¨â€ðŸ³";
            if (gameState.enemy.includes("mate")) sprite = "ðŸ§‘â€âœˆï¸";
            if (gameState.enemy.includes("crew")) sprite = "ðŸ‘¨â€âœˆï¸";
            document.getElementById('enemy-sprite').textContent = sprite;
            
            // Set initial stats
            document.getElementById('player-combat-stamina').textContent = gameState.stats.stamina;
            document.getElementById('player-stamina-text').textContent = `${gameState.stats.stamina}/${gameState.stats.maxStamina}`;
            document.getElementById('player-combat-health').style.width = `${(gameState.stats.stamina / gameState.stats.maxStamina) * 100}%`;
            
            document.getElementById('enemy-combat-stamina').textContent = enemy.stamina;
            document.getElementById('enemy-stamina-text').textContent = `${enemy.stamina}/${enemies[gameState.enemy].stamina}`;
            document.getElementById('enemy-combat-health').style.width = `${(enemy.stamina / enemies[gameState.enemy].stamina) * 100}%`;
            
            // Set combat description
            document.getElementById('combat-description').innerHTML = `
                <p>You face ${enemy.name}: ${enemy.description}</p>
                <p>Enemy Skill: ${enemy.skill}, Stamina: ${enemy.stamina}</p>
                ${enemy.weakness ? `<p class="warning">Weakness: ${enemy.weakness}</p>` : ''}
            `;
            
            // Clear combat log
            document.getElementById('combat-log').innerHTML = '<p>Combat begins on the rolling sea!</p>';
            
            // Display combat options
            const optionsDiv = document.getElementById('combat-options');
            optionsDiv.innerHTML = '';
            
            const attackButton = document.createElement('button');
            attackButton.textContent = "ATTACK";
            attackButton.onclick = combatRound;
            optionsDiv.appendChild(attackButton);
            
            const testLuckButton = document.createElement('button');
            testLuckButton.textContent = "TEST YOUR LUCK";
            testLuckButton.onclick = testLuckInCombat;
            optionsDiv.appendChild(testLuckButton);
            
            const fleeButton = document.createElement('button');
            fleeButton.textContent = "ATTEMPT TO FLEE";
            fleeButton.onclick = attemptToFlee;
            optionsDiv.appendChild(fleeButton);
        }
        
        function combatRound() {
            const enemy = gameState.enemyData;
            gameState.combatRound++;
            
            // Player attack
            const playerAttack = rollDice(2, 6) + gameState.stats.skill;
            const enemyAttack = rollDice(2, 6) + enemy.skill;
            
            let combatLog = document.getElementById('combat-log');
            let logEntry = `<div class="combat-turn"><strong>Round ${gameState.combatRound}</strong><br>`;
            logEntry += `Your Attack Strength: ${playerAttack}<br>`;
            logEntry += `${enemy.name}'s Attack Strength: ${enemyAttack}<br>`;
            
            if (playerAttack > enemyAttack) {
                // Player hits
                logEntry += `<span class="outcome-good">You hit ${enemy.name} for ${enemy.damage} damage!</span>`;
                enemy.stamina -= enemy.damage;
                
                // Check if enemy is defeated
                if (enemy.stamina <= 0) {
                    logEntry += `<br><span class="victory">You defeated ${enemy.name}!</span>`;
                    combatLog.innerHTML += logEntry + '</div>';
                    
                    // Award loot and end combat after delay
                    setTimeout(function() { combatVictory(); }, 1500);
                    return;
                }
            } else if (enemyAttack > playerAttack) {
                // Enemy hits
                logEntry += `<span class="outcome-bad">${enemy.name} hits you for ${enemy.damage} damage!</span>`;
                gameState.stats.stamina -= enemy.damage;
                updateAllDisplays();
                
                // Check if player is defeated
                if (gameState.stats.stamina <= 0) {
                    logEntry += `<br><span class="game-over">You have been defeated!</span>`;
                    combatLog.innerHTML += logEntry + '</div>';
                    
                    setTimeout(function() {
                        showGameOver(`<p class="game-over">VOYAGE ENDED</p><p>${enemy.name} has defeated you. The Demeter claims another victim.</p>`);
                    }, 1500);
                    return;
                }
            } else {
                // Tie
                logEntry += `<span class="warning">Your attacks cancel each other out!</span>`;
            }
            
            logEntry += '</div>';
            combatLog.innerHTML += logEntry;
            combatLog.scrollTop = combatLog.scrollHeight;
            
            // Update displays
            document.getElementById('player-combat-stamina').textContent = gameState.stats.stamina;
            document.getElementById('player-stamina-text').textContent = `${gameState.stats.stamina}/${gameState.stats.maxStamina}`;
            document.getElementById('player-combat-health').style.width = `${(gameState.stats.stamina / gameState.stats.maxStamina) * 100}%`;
            
            document.getElementById('enemy-combat-stamina').textContent = enemy.stamina;
            document.getElementById('enemy-stamina-text').textContent = `${enemy.stamina}/${enemies[gameState.enemy].stamina}`;
            document.getElementById('enemy-combat-health').style.width = `${(enemy.stamina / enemies[gameState.enemy].stamina) * 100}%`;
            
            // Update attack strengths for display
            document.getElementById('player-attack').textContent = playerAttack;
            document.getElementById('enemy-attack').textContent = enemyAttack;
        }
        
        function testLuckInCombat() {
            if (gameState.stats.luck <= 0) {
                const combatLog = document.getElementById('combat-log');
                combatLog.innerHTML += `<div class="combat-turn"><span class="outcome-bad">You have no Luck left to test!</span></div>`;
                combatLog.scrollTop = combatLog.scrollHeight;
                return;
            }
            
            const enemy = gameState.enemyData;
            const roll = rollDice(2, 6);
            
            // Reduce luck by 1 for testing it
            const currentLuck = gameState.stats.luck;
            gameState.stats.luck -= 1;
            updateAllDisplays();
            
            const combatLog = document.getElementById('combat-log');
            let logEntry = `<div class="combat-turn"><strong>Luck Test</strong><br>`;
            logEntry += `You rolled ${roll}. Your Luck is ${currentLuck}.<br>`;
            
            if (roll <= currentLuck) {
                // Lucky
                logEntry += `<span class="outcome-good">You are Lucky! You deal an extra 2 damage!</span>`;
                enemy.stamina -= 2;
                
                if (enemy.stamina <= 0) {
                    logEntry += `<br><span class="victory">You defeated ${enemy.name}!</span>`;
                    combatLog.innerHTML += logEntry + '</div>';
                    
                    setTimeout(function() { combatVictory(); }, 1500);
                    return;
                }
            } else {
                // Unlucky
                logEntry += `<span class="outcome-bad">You are Unlucky! ${enemy.name} deals an extra 2 damage!</span>`;
                gameState.stats.stamina -= 2;
                updateAllDisplays();
                
                if (gameState.stats.stamina <= 0) {
                    logEntry += `<br><span class="game-over">You have been defeated!</span>`;
                    combatLog.innerHTML += logEntry + '</div>';
                    
                    setTimeout(function() {
                        showGameOver(`<p class="game-over">VOYAGE ENDED</p><p>${enemy.name} has defeated you.</p>`);
                    }, 1500);
                    return;
                }
            }
            
            logEntry += '</div>';
            combatLog.innerHTML += logEntry;
            combatLog.scrollTop = combatLog.scrollHeight;
            
            // Update displays
            document.getElementById('player-combat-stamina').textContent = gameState.stats.stamina;
            document.getElementById('player-stamina-text').textContent = `${gameState.stats.stamina}/${gameState.stats.maxStamina}`;
            document.getElementById('player-combat-health').style.width = `${(gameState.stats.stamina / gameState.stats.maxStamina) * 100}%`;
            
            document.getElementById('enemy-combat-stamina').textContent = enemy.stamina;
            document.getElementById('enemy-stamina-text').textContent = `${enemy.stamina}/${enemies[gameState.enemy].stamina}`;
            document.getElementById('enemy-combat-health').style.width = `${(enemy.stamina / enemies[gameState.enemy].stamina) * 100}%`;
        }
        
        function attemptToFlee() {
            const enemy = gameState.enemyData;
            const roll = rollDice(2, 6);
            
            const combatLog = document.getElementById('combat-log');
            let logEntry = `<div class="combat-turn"><strong>Attempt to Flee</strong><br>`;
            logEntry += `You roll ${roll}.<br>`;
            
            // Need to roll less than Skill to escape
            if (roll < gameState.stats.skill) {
                logEntry += `<span class="outcome-good">You successfully flee from combat!</span>`;
                combatLog.innerHTML += logEntry + '</div>';
                
                // Return to game after a delay
                setTimeout(function() {
                    gameState.inCombat = false;
                    showGameScreen();
                }, 1500);
            } else {
                logEntry += `<span class="outcome-bad">You fail to escape! ${enemy.name} gets a free attack!</span>`;
                combatLog.innerHTML += logEntry + '</div>';
                
                // Enemy gets free attack
                setTimeout(function() {
                    gameState.stats.stamina -= enemy.damage;
                    updateAllDisplays();
                    
                    combatLog.innerHTML += `<div class="combat-turn"><span class="outcome-bad">${enemy.name} hits you for ${enemy.damage} damage as you try to flee!</span></div>`;
                    combatLog.scrollTop = combatLog.scrollHeight;
                    
                    // Check if player is defeated
                    if (gameState.stats.stamina <= 0) {
                        setTimeout(function() {
                            showGameOver(`<p class="game-over">VOYAGE ENDED</p><p>${enemy.name} has defeated you.</p>`);
                        }, 1500);
                        return;
                    }
                    
                    // Update displays
                    document.getElementById('player-combat-stamina').textContent = gameState.stats.stamina;
                    document.getElementById('player-stamina-text').textContent = `${gameState.stats.stamina}/${gameState.stats.maxStamina}`;
                    document.getElementById('player-combat-health').style.width = `${(gameState.stats.stamina / gameState.stats.maxStamina) * 100}%`;
                }, 1000);
            }
        }
        
        function combatVictory() {
            const enemy = enemies[gameState.enemy];
            
            // Award loot
            if (enemy.loot) {
                const [item, gold] = enemy.loot;
                if (item && !gameState.inventory.includes(item)) {
                    gameState.inventory.push(item);
                }
                // Note: gold not used in this game, but keeping structure
            }
            
            // Feeding after combat reduces hunger
            gameState.hunger -= 2;
            if (gameState.hunger < 0) gameState.hunger = 0;
            
            // Increase suspicion
            gameState.suspicion += 2;
            if (gameState.suspicion > 10) gameState.suspicion = 10;
            
            updateAllDisplays();
            
            // Show victory message
            const combatLog = document.getElementById('combat-log');
            combatLog.innerHTML += `<div class="combat-turn"><span class="victory">VICTORY!</span><br>`;
            combatLog.innerHTML += `You feed on your victim. Hunger decreases, but suspicion rises.`;
            combatLog.innerHTML += '</div>';
            combatLog.scrollTop = combatLog.scrollHeight;
            
            // Return to game after a delay
            setTimeout(function() {
                gameState.inCombat = false;
                // Go to the after combat section
                if (gameState.afterCombatSection) {
                    goToSection(gameState.afterCombatSection);
                } else {
                    goToSection(200); // Default victory
                }
            }, 3000);
        }
        
        // Display Inventory
        function displayInventory() {
            // Vampire Items
            const vampireDiv = document.getElementById('vampire-items-display');
            vampireDiv.innerHTML = '';
            
            const vampireItems = gameState.inventory.filter(itemId => 
                items[itemId] && (items[itemId].type === 'special' || itemId === 'crew_knowledge' || itemId === 'rat_swarm')
            );
            
            if (vampireItems.length === 0) {
                vampireDiv.innerHTML = '<p>No vampiric items</p>';
            } else {
                vampireItems.forEach(itemId => {
                    const item = items[itemId];
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'inventory-item';
                    itemDiv.innerHTML = `
                        <div>
                            <strong>${item.name}</strong><br>
                            <small>${item.description}</small>
                        </div>
                    `;
                    vampireDiv.appendChild(itemDiv);
                });
            }
            
            // Ship Items
            const shipDiv = document.getElementById('ship-items-display');
            shipDiv.innerHTML = '';
            
            const shipItems = gameState.inventory.filter(itemId => 
                items[itemId] && items[itemId].type === 'weapon'
            );
            
            if (shipItems.length === 0) {
                shipDiv.innerHTML = '<p>No ship weapons</p>';
            } else {
                shipItems.forEach(itemId => {
                    const item = items[itemId];
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'inventory-item';
                    itemDiv.innerHTML = `
                        <div>
                            <strong>${item.name}</strong><br>
                            <small>${item.description}</small>
                        </div>
                    `;
                    shipDiv.appendChild(itemDiv);
                });
            }
            
            // Crew Items
            const crewDiv = document.getElementById('crew-items-display');
            crewDiv.innerHTML = '<p>No crew possessions</p>';
            
            // Earth Display
            const earthDiv = document.getElementById('earth-display');
            earthDiv.innerHTML = `
                <div class="inventory-item">
                    <div>
                        <strong>Coffin Earth</strong><br>
                        <small>Sacred earth for resting. You have ${gameState.earth} units.</small>
                    </div>
                </div>
            `;
        }
        
        // Display Stats
        function displayStats() {
            document.getElementById('sheet-stealth').textContent = gameState.stats.stealth;
            document.getElementById('sheet-domination').textContent = gameState.stats.domination;
            document.getElementById('sheet-shapeshift').textContent = gameState.stats.shapeshift;
            document.getElementById('sheet-skill').textContent = gameState.stats.skill;
            document.getElementById('sheet-luck').textContent = `${gameState.stats.luck}/${gameState.stats.initialLuck}`;
            
            // Crew Status
            const crewDiv = document.getElementById('crew-status');
            crewDiv.innerHTML = '';
            
            for (const crewMember in gameState.crew) {
                if (gameState.crew[crewMember].alive) {
                    const crewDivItem = document.createElement('div');
                    crewDivItem.className = 'inventory-item';
                    crewDivItem.innerHTML = `
                        <div>
                            <strong>${gameState.crew[crewMember].name}</strong><br>
                            <small>Alive - ${gameState.crew[crewMember].location}</small>
                        </div>
                    `;
                    crewDiv.appendChild(crewDivItem);
                }
            }
            
            // Ship Areas
            const areasDiv = document.getElementById('ship-areas');
            areasDiv.innerHTML = '';
            
            for (const area in gameState.areas) {
                const areaDiv = document.createElement('div');
                areaDiv.className = 'inventory-item';
                const visited = gameState.areas[area].visited ? 'Visited' : 'Unexplored';
                areaDiv.innerHTML = `
                    <div>
                        <strong>${gameState.areas[area].name}</strong><br>
                        <small>${visited}</small>
                    </div>
                `;
                areasDiv.appendChild(areaDiv);
            }
        }
        
        // Return to Game
        function returnToGame() {
            showGameScreen();
        }
        
        // Save/Load Game
        function saveGame() {
            const saveData = JSON.stringify(gameState);
            localStorage.setItem('draculaRiseSave', saveData);
            
            const gameText = document.getElementById('game-text');
            gameText.innerHTML += `<p class="outcome-good">Voyage saved!</p>`;
        }
        
        function loadGame() {
            const saveData = localStorage.getItem('draculaRiseSave');
            if (!saveData) {
                const gameText = document.getElementById('game-text');
                gameText.innerHTML += `<p class="outcome-bad">No saved voyage found!</p>`;
                return;
            }
            
            try {
                const loaded = JSON.parse(saveData);
                
                // Restore game state
                Object.assign(gameState, loaded);
                
                // Update displays
                updateAllDisplays();
                
                // Go to current section
                displaySection(gameState.currentSection);
                
                const gameText = document.getElementById('game-text');
                gameText.innerHTML += `<p class="outcome-good">Voyage loaded!</p>`;
            } catch (error) {
                const gameText = document.getElementById('game-text');
                gameText.innerHTML += `<p class="outcome-bad">Error loading saved voyage!</p>`;
            }
        }
        
        // Restart Game
        function restartGame() {
            // Reset game state
            gameState.screen = 'start';
            gameState.currentSection = 1;
            gameState.visitedSections = [];
            gameState.stats = {
                stamina: 0,
                maxStamina: 0,
                skill: 0,
                luck: 0,
                initialLuck: 0,
                stealth: 3,
                domination: 3,
                shapeshift: 3,
                points: 10
            };
            gameState.hunger = 5;
            gameState.suspicion = 2;
            gameState.days = 1;
            gameState.crewAlive = 7;
            gameState.currentArea = 'hold';
            gameState.inventory = [];
            gameState.earth = 1;
            gameState.gameOver = false;
            gameState.victory = false;
            gameState.inCombat = false;
            gameState.enemy = null;
            gameState.enemyData = null;
            gameState.combatRound = 0;
            gameState.afterCombatSection = null;
            gameState.selectedStartingItem = null;
            
            // Reset crew
            gameState.crew = {
                captain: { name: "Captain Demeter", alive: true, suspicious: false, location: "captains_cabin" },
                first_mate: { name: "First Mate Ivan", alive: true, suspicious: false, location: "deck" },
                cook: { name: "Cook Petrov", alive: true, suspicious: false, location: "galley" },
                lookout: { name: "Lookout Yuri", alive: true, suspicious: false, location: "deck" },
                sailor1: { name: "Sailor Dimitri", alive: true, suspicious: false, location: "crew_quarters" },
                sailor2: { name: "Sailor Alexei", alive: true, suspicious: false, location: "crew_quarters" },
                sailor3: { name: "Sailor Sergei", alive: true, suspicious: false, location: "hold" }
            };
            
            // Reset areas
            gameState.areas = {
                hold: { name: "Ship's Hold", visited: true, description: "Dark, cramped space with your coffins and cargo." },
                galley: { name: "Galley", visited: false, description: "Ship's kitchen. Smells of stale food and cooking oil." },
                crew_quarters: { name: "Crew Quarters", visited: false, description: "Where the crew sleeps. Hammocks swing with the ship's motion." },
                deck: { name: "Main Deck", visited: false, description: "Open air, ropes, sails, and the vast sea around you." },
                captains_cabin: { name: "Captain's Cabin", visited: false, description: "The captain's private quarters. Charts and logs." },
                forecastle: { name: "Forecastle", visited: false, description: "Forward part of the ship. Anchor chains and storage." }
            };
            
            // Show character screen
            showCharacterScreen();
        }
        
        function resetCharacterScreen() {
            // Reset all button highlights
            document.getElementById('crew-knowledge-btn').style.borderColor = '#666';
            document.getElementById('crew-knowledge-btn').style.color = '#fff';
            document.getElementById('hidden-cache-btn').style.borderColor = '#666';
            document.getElementById('hidden-cache-btn').style.color = '#fff';
            document.getElementById('rats-btn').style.borderColor = '#666';
            document.getElementById('rats-btn').style.color = '#fff';
            
            // Reset selected item
            gameState.selectedStartingItem = null;
            
            // Update begin button state
            updateBeginButtonState();
        }
        
        // Initialize game when page loads
        window.onload = initGame;
    </script>
</body>
</html>
